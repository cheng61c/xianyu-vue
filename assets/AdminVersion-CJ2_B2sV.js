import{_ as e}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as a}from"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import{_ as l}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as n}from"./EmptyState.vue_vue_type_script_setup_true_lang-Bg-k0MPd.js";import{aq as u,f as t,ar as i,as as o,at as s,au as d}from"./store-module/admin/service-Dq4pkIEc.js";import{_ as c}from"./ScSelector.vue_vue_type_script_setup_true_lang-DdvKffTA.js";import{_ as r}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{v,w as b,u as p,x as m,H as h,f as g,o as _,g as x,B as f,D as j,q as $,C as y,J as V,A as z,F as w,y as k}from"./lucide-vue-next-Cfi51zEF.js";import{$ as C,l as q,a0 as B}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/user/userStore-8LCsejjm.js";import"./store-module/post/postStore-D6edmGvH.js";const S={class:"flex gap-2"},U={class:"overflow-x-auto"},A={class:"table"},I={class:"flex items-center gap-2"},D={class:"text-xl mb-4"},F={class:"flex items-center gap-4"},E={class:"flex items-center gap-4"},H={class:"flex items-center gap-4"},J={class:"flex gap-4 justify-end"},M={class:"text-xl mb-4"},O={class:"flex items-center gap-4"},G={class:"flex items-center gap-4"},K={class:"flex items-center gap-4"},L={class:"flex gap-4 justify-end"},N={class:"text-xl mb-4"},P={class:"mb-4"},Q={class:"text-warning mb-4"},R={class:"text-error mb-4"},T={class:"flex gap-4 justify-end"},W={class:"text-xl mb-4"},X={class:"text-warning mb-4"},Y={class:"flex gap-4 justify-end"},Z=v({__name:"AdminVersion",setup(v){const{t:Z}=b(),ee=p(),ae=m("plugin"),le=[{value:"plugin",label:Z("b.cha-jian-ban")},{value:"online",label:Z("b.lian-ji-ban")},{value:"original",label:Z("b.yuan-ban")}],ne={plugin:Z("b.cha-jian-ban"),online:Z("b.lian-ji-ban"),original:Z("b.yuan-ban")},ue=m([]),te=m(-1),ie=m(!1),oe=m(!1),se=m(!1),de=m(!1),ce=m({name:"",version:""}),re=m({id:-1,name:"",type:"plugin",version:""}),ve=()=>{u().then(e=>{200===e.data.code&&(ue.value=e.data.data.map(e=>(e.createdAt=t(e.createdAt,Z),e.updatedAt=t(e.updatedAt,Z),e)))}).catch(e=>{ee.error(Z("t.wei-zhi-cuo-wu"))})},be=e=>{const a=ue.value[e];if(!ie.value)return te.value=e,re.value.id=a.id,re.value.name=a.name,re.value.type=a.type,re.value.version=a.version,ae.value=a.type,void(ie.value=!0);const l="object"==typeof ae.value?ae.value.value:ae.value,n={};a.name!==re.value.name&&(n.name=re.value.name),a.type!==l&&(n.type=l),a.version!==re.value.version&&(n.version=re.value.version),0!==Object.keys(n).length?i(a.id,n).then(e=>{200===e.data.code&&(ve(),ee.success(Z("t.xiu-gai-cheng-gong")),te.value=-1,ie.value=!1)}).catch(e=>{ee.error(Z("t.wei-zhi-cuo-wu"))}):ie.value=!1},pe=()=>{if(!oe.value)return ce.value.name="",ce.value.type="plugin",ce.value.version="",void(oe.value=!0);const e="object"==typeof ae.value?ae.value.value:ae.value;if(!ce.value.name||!ce.value.version)return void ee.warning(Z("t.qing-tian-xie-wan-zheng-de-ban-ben-xin-xi"));const a={name:ce.value.name,type:e,version:ce.value.version};o(a).then(e=>{200===e.data.code&&(ve(),oe.value=!1)}).catch(e=>{ee.error(Z("t.wei-zhi-cuo-wu"))})},me=e=>{const a=ue.value[e];if(!se.value)return te.value=e,void(se.value=!0);s(a.id).then(e=>{200===e.data.code&&(ve(),se.value=!1)}).catch(e=>{ee.error(Z("t.wei-zhi-cuo-wu"))})},he=(e,a)=>{const l=ue.value[e];if(!de.value)return te.value=e,void(de.value=!0);d({id:l.id,disabled:a}).then(e=>{200===e.data.code&&(ve(),ee.success(Z("t.cao-zuo-cheng-gong")),de.value=!1)}).catch(e=>{ee.error(Z("t.wei-zhi-cuo-wu"))})};return h(()=>{ve()}),(u,t)=>(_(),g(w,null,[x(e,{class:"mb-4"},{default:j(()=>[$("div",S,[x(l,{onClick:ve,icon:y(C),Border:""},{default:j(()=>[V(z(u.$t("b.shua-xin-ban-ben-lie-biao")),1)]),_:1},8,["icon"]),x(l,{onClick:pe,icon:y(q),Border:""},{default:j(()=>[V(z(u.$t("b.tian-jia-xin-ban-ben-hao")),1)]),_:1},8,["icon"])])]),_:1}),ue.value.length?(_(),f(e,{key:0,class:"mb-4"},{default:j(()=>[$("div",U,[$("table",A,[$("thead",null,[$("tr",null,[t[18]||(t[18]=$("th",null,"ID",-1)),$("th",null,z(u.$t("b.ming-cheng")),1),$("th",null,z(u.$t("b.hui-fu")),1),$("th",null,z(u.$t("b.ban-ben-lei-xing")),1),$("th",null,z(u.$t("b.chuang-jian-shi-jian")),1),$("th",null,z(u.$t("b.zui-hou-geng-xin-shi-jian")),1),$("th",null,z(u.$t("b.cao-zuo")),1)])]),$("tbody",null,[(_(!0),g(w,null,k(ue.value,(e,a)=>(_(),g("tr",{key:e.id},[$("th",null,z(e.id),1),$("td",null,z(e.name),1),$("td",null,z(e.version),1),$("td",null,z(ne[e.type]),1),$("td",null,z(e.createdAt),1),$("td",null,z(e.updatedAt),1),$("td",null,[$("div",I,[x(l,{onClick:e=>be(a),Border:""},{default:j(()=>[V(z(u.$t("b.bian-ji")),1)]),_:1},8,["onClick"]),x(l,{onClick:e=>he(a,1),Border:""},{default:j(()=>[V(z(u.$t("b.jin-yong")),1)]),_:1},8,["onClick"]),x(l,{onClick:e=>me(a),Border:""},{default:j(()=>[V(z(u.$t("b.shan-chu")),1)]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})):(_(),f(n,{key:1,title:u.$t("t.zan-wu-tie-zi"),iconSize:"64",iconColor:"#ccc",icon:y(B),class:"mt-8",action:u.$t("b.dian-ji-shua-xin"),actionIcon:y(C),onActionClick:ve},null,8,["title","icon","action","actionIcon"])),x(r,{modelValue:ie.value,"onUpdate:modelValue":t[5]||(t[5]=e=>ie.value=e)},{default:j(()=>[x(e,{class:"p-6 w-2xl"},{default:j(()=>[$("div",D,z(u.$t("d.xiu-gai-ban-ben-hao")),1),$("div",F,[$("span",null,z(u.$t("d.ming-cheng")),1),x(a,{modelValue:re.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>re.value.name=e),placeholder:u.$t("d.ban-ben-ming-cheng"),class:"m-2"},null,8,["modelValue","placeholder"])]),$("div",E,[$("span",null,z(u.$t("d.lei-xing")),1),x(c,{modelValue:ae.value,"onUpdate:modelValue":t[1]||(t[1]=e=>ae.value=e),options:le,placeholder:u.$t("b.cha-jian-ban"),class:"w-53 ml-2"},null,8,["modelValue","placeholder"])]),$("div",H,[$("span",null,z(u.$t("b.ban-ben-hao")),1),x(a,{modelValue:re.value.version,"onUpdate:modelValue":t[2]||(t[2]=e=>re.value.version=e),placeholder:u.$t("b.hui-fu"),class:"m-2"},null,8,["modelValue","placeholder"])]),$("div",J,[x(l,{class:"px-4",onClick:t[3]||(t[3]=e=>be(te.value)),Border:""},{default:j(()=>[V(z(u.$t("b.ti-jiao-xiu-gai")),1)]),_:1}),x(l,{class:"px-4",onClick:t[4]||(t[4]=e=>ie.value=!1),Border:""},{default:j(()=>[V(z(u.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),x(r,{modelValue:oe.value,"onUpdate:modelValue":t[10]||(t[10]=e=>oe.value=e)},{default:j(()=>[x(e,{class:"p-6 w-2xl"},{default:j(()=>[$("div",M,z(u.$t("b.tian-jia-xin-ban-ben-hao")),1),$("div",O,[$("span",null,z(u.$t("d.ming-cheng")),1),x(a,{modelValue:ce.value.name,"onUpdate:modelValue":t[6]||(t[6]=e=>ce.value.name=e),placeholder:u.$t("d.ban-ben-ming-cheng"),class:"m-2"},null,8,["modelValue","placeholder"])]),$("div",G,[$("span",null,z(u.$t("d.lei-xing")),1),x(c,{modelValue:ae.value,"onUpdate:modelValue":t[7]||(t[7]=e=>ae.value=e),options:le,placeholder:u.$t("b.cha-jian-ban"),class:"w-53 ml-2"},null,8,["modelValue","placeholder"])]),$("div",K,[$("span",null,z(u.$t("b.ban-ben-hao")),1),x(a,{modelValue:ce.value.version,"onUpdate:modelValue":t[8]||(t[8]=e=>ce.value.version=e),class:"m-2"},null,8,["modelValue"])]),$("div",L,[x(l,{class:"px-4",onClick:pe,Border:""},{default:j(()=>[V(z(u.$t("b.que-ren-tian-jia")),1)]),_:1}),x(l,{class:"px-4",onClick:t[9]||(t[9]=e=>oe.value=!1),Border:""},{default:j(()=>[V(z(u.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),x(r,{modelValue:se.value,"onUpdate:modelValue":t[13]||(t[13]=e=>se.value=e)},{default:j(()=>[x(e,{class:"p-6 w-2xl"},{default:j(()=>[$("div",N,z(u.$t("b.shan-chu-ban-ben-hao")),1),$("div",P,[V(z(u.$t("d.mu-biao-ban-ben-hao"))+" ",1),$("span",null,z(ue.value[te.value].version),1)]),$("div",Q,z(u.$t("d.shan-chu-ban-ben-hou-zhi-qian-shi-yong-gai-ban-ben-de-tie-zi-jiang-bu-zai-zhan-shi-tian-jia-xin-de-zi-yuan-shi-ye-wu-fa-xuan-ze-gai-ban-ben-hao")),1),$("div",R,z(u.$t("d.shan-chu-cao-zuo-bu-ke-ni-qing-jin-shen-cao-zuo")),1),$("div",T,[x(l,{class:"px-4 border border-error text-error",onClick:t[11]||(t[11]=e=>me(te.value))},{default:j(()=>[V(z(u.$t("b.que-ren-shan-chu")),1)]),_:1}),x(l,{class:"px-4",onClick:t[12]||(t[12]=e=>se.value=!1),Border:""},{default:j(()=>[V(z(u.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),x(r,{modelValue:de.value,"onUpdate:modelValue":t[17]||(t[17]=e=>de.value=e)},{default:j(()=>[x(e,{class:"p-6 w-2xl"},{default:j(()=>[$("div",W,z(u.$t("d.jin-yong-ban-ben-hao")),1),$("div",X,z(u.$t("d.jin-yong-ban-ben-hou-zhi-qian-shi-yong-gai-ban-ben-de-tie-zi-zheng-chang-xian-shi-dan-wu-fa-zai-tian-jia-xin-de-zi-yuan-shi-xuan-ze-gai-ban-ben-hao")),1),$("div",Y,[x(l,{class:"px-4 border border-error text-error",onClick:t[14]||(t[14]=e=>he(te.value,2))},{default:j(()=>[V(z(u.$t("b.que-ren-jin-yong")),1)]),_:1}),x(l,{class:"px-4 border border-success text-success",onClick:t[15]||(t[15]=e=>he(te.value,1))},{default:j(()=>[V(z(u.$t("b.hui-fu")),1)]),_:1}),x(l,{class:"px-4",onClick:t[16]||(t[16]=e=>de.value=!1),Border:""},{default:j(()=>[V(z(u.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])],64))}});export{Z as default};
