import{_ as e}from"./ScSelector.vue_vue_type_script_setup_true_lang-DdvKffTA.js";import{_ as a}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as l}from"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import{_ as t}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as u}from"./EmptyState.vue_vue_type_script_setup_true_lang-Bg-k0MPd.js";import{ae as s,f as n,af as o}from"./store-module/admin/service-Dq4pkIEc.js";import{_ as i}from"./Pagination.vue_vue_type_script_setup_true_lang-DhJQJgY1.js";import{_ as r}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{v as c,w as d,x as v,H as p,f as m,o as b,g,B as _,I as f,D as x,q as h,J as y,A as j,F as $,y as k,C as z}from"./lucide-vue-next-Cfi51zEF.js";import{_ as w}from"./ScRole.vue_vue_type_script_setup_true_lang-Bz5l_0n_.js";import{$ as V,a0 as C}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/user/userStore-8LCsejjm.js";import"./store-module/post/postStore-D6edmGvH.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-8C3JL_QJ.js";import"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";const q={class:"flex gap-4"},I={class:"flex gap-4"},S={class:"flex items-center gap-2 w-full"},B={class:"flex items-center gap-2 w-full"},A={class:"overflow-x-auto"},U={class:"table"},D={class:"flex items-center gap-2 flex-wrap"},T={class:"flex items-center gap-2 flex-wrap"},P={class:"flex items-center gap-2 flex-wrap"},E={class:"text-xl mb-4"},F={class:"flex items-center gap-2"},R={class:"text-gray-content"},H={class:"flex items-center gap-2"},J={class:"text-gray-content"},M={class:"text-gray-content"},G={class:"flex items-center gap-2"},K={class:"text-gray-content"},L={class:"flex items-center gap-2 flex-wrap"},N={class:"flex items-center gap-2"},O={class:"text-gray-content"},Q={class:"flex items-center gap-2 flex-wrap"},W={class:"flex items-center gap-2"},X={class:"text-gray-content"},Y={class:"text-gray-content"},Z={class:"flex gap-4 justify-end"},ee={class:"text-xl mb-4"},ae={class:"flex items-center gap-2"},le={class:"text-gray-content"},te={class:"flex items-center gap-2"},ue={class:"text-gray-content"},se={class:"text-gray-content"},ne={class:"flex items-center gap-2"},oe={class:"text-gray-content"},ie={class:"flex items-center gap-2 flex-wrap"},re={class:"flex items-center gap-2"},ce={class:"text-gray-content"},de={class:"text-gray-content"},ve={class:"flex items-center gap-2"},pe={class:"text-gray-content"},me={class:"flex items-center gap-2 flex-wrap"},be={class:"flex items-center gap-2"},ge={class:"text-gray-content"},_e={class:"flex gap-4 justify-end"},fe=c({__name:"AdminReport",setup(c){const{t:fe}=d(),xe=v(""),he=v(0),ye=v(0),je=[{value:0,label:fe("b.quan-bu")},{value:1,label:fe("b.wei-chu-li")},{value:2,label:fe("b.feng-jin")},{value:3,label:fe("b.bu-feng-jin")}],$e={0:fe("b.quan-bu"),1:fe("b.wei-chu-li"),2:fe("b.feng-jin"),3:fe("b.bu-feng-jin")},ke=v(0),ze=[{value:0,label:fe("b.sou-suo-ju-bao-zhe-id")},{value:1,label:fe("b.sou-suo-ju-bao-mu-biao-id")},{value:2,label:fe("b.sou-suo-chu-li-ren-id")}],we=v(0),Ve=[{value:0,label:fe("b.quan-bu")},{value:1,label:fe("nav.tie-zi")},{value:2,label:fe("nav.ping-lun")},{value:3,label:fe("nav.fu-wu-qi")},{value:4,label:fe("b.yong-hu")}],Ce={0:fe("b.quan-bu"),1:fe("nav.tie-zi"),2:fe("nav.ping-lun"),3:fe("nav.fu-wu-qi"),4:fe("b.yong-hu")},qe=v({page:1,total:0,limit:10}),Ie=v([]),Se=v(!1),Be=v(-1),Ae=v(""),Ue=v(!1),De=e=>{qe.value.page=e,Pe()},Te=()=>{qe.value.page=1,Pe()},Pe=()=>{const e={},a="object"==typeof he.value?he.value.value:he.value,l="object"==typeof we.value?we.value.value:we.value,t="object"==typeof ke.value?ke.value.value:ke.value;if(e.page=qe.value.page,e.limit=qe.value.limit,0!==t&&xe.value)switch(t){case 0:e.userId=xe.value;break;case 1:e.targetId=xe.value;break;case 2:e.handlerId=xe.value}0!==a&&(e.status=a),0!==l&&(e.targetType=l),s(e).then(e=>{200===e.data.code&&(Ie.value=e.data.data.list.map(e=>(e.createdAt=n(e.createdAt,fe),e.updatedAt=n(e.updatedAt,fe),e)),qe.value.limit=e.data.data.limit||10,qe.value.page=e.data.data.page||1,qe.value.total=e.data.data.total||0)}).catch(e=>{})},Ee=e=>{const a=Ie.value[e],l="object"==typeof ye.value?ye.value.value:ye.value;if(!Ue.value)return Be.value=e,Ae.value=a.result||"",ye.value=a.status,void(Ue.value=!0);o({id:a.id,result:Ae.value,status:l}).then(e=>{200===e.data.code&&(Pe(),Ue.value=!1)}).catch(e=>{})};return p(()=>{Pe()}),(s,n)=>(b(),m($,null,[g(a,{class:"mb-4"},{default:x(()=>[h("div",q,[g(e,{modelValue:ke.value,"onUpdate:modelValue":n[0]||(n[0]=e=>ke.value=e),options:ze,placeholder:s.$t("b.sou-suo-ju-bao-zhe-id"),class:"w-40"},null,8,["modelValue","placeholder"]),g(l,{modelValue:xe.value,"onUpdate:modelValue":n[1]||(n[1]=e=>xe.value=e),placeholder:s.$t("b.sou-suo"),class:"w-xs"},null,8,["modelValue","placeholder"]),g(t,{class:"px-4",Border:"",onClick:Te},{default:x(()=>[y(j(s.$t("b.sou-suo")),1)]),_:1}),g(t,{class:"px-4",Border:"",onClick:Pe},{default:x(()=>[y(j(s.$t("b.shua-xin")),1)]),_:1})]),h("div",I,[h("label",S,[h("span",null,j(s.$t("d.ju-bao-lei-xing")),1),g(e,{modelValue:we.value,"onUpdate:modelValue":n[2]||(n[2]=e=>we.value=e),options:Ve,placeholder:s.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])]),h("label",B,[h("span",null,j(s.$t("b.zhuang-tai")),1),g(e,{modelValue:he.value,"onUpdate:modelValue":n[3]||(n[3]=e=>he.value=e),options:je,placeholder:s.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])])])]),_:1}),Ie.value.length?(b(),_(a,{key:0,class:"mb-4"},{default:x(()=>[h("div",A,[h("table",U,[h("thead",null,[h("tr",null,[n[13]||(n[13]=h("th",null,"ID",-1)),h("th",null,j(s.$t("b.mu-biao-lei-xing")),1),h("th",null,j(s.$t("b.mu-biao-id")),1),h("th",null,j(s.$t("b.ju-bao-zhe")),1),h("th",null,j(s.$t("b.chu-li-ren")),1),h("th",null,j(s.$t("b.chu-li-zhuang-tai")),1),h("th",null,j(s.$t("b.chu-li-bei-zhu")),1),h("th",null,j(s.$t("b.chuang-jian-shi-jian")),1),h("th",null,j(s.$t("b.geng-xin-shi-jian")),1),h("th",null,j(s.$t("b.cao-zuo")),1)])]),h("tbody",null,[(b(!0),m($,null,k(Ie.value,(e,a)=>{var l;return b(),m("tr",{key:e.id},[h("th",null,j(e.id),1),h("td",null,j(Ce[e.targetType]),1),h("td",null,j(e.targetId),1),h("td",null,[h("div",D,[y(j(e.creator.nickname)+" ",1),g(w,{size:"sm",user:e.creator},null,8,["user"])])]),h("td",null,[h("div",T,[y(j((null==(l=e.handler)?void 0:l.nickname)??"null")+" ",1),g(w,{size:"sm",user:e.handler},null,8,["user"])])]),h("td",null,j($e[e.status]),1),h("td",null,j(e.result),1),h("td",null,j(e.createdAt),1),h("td",null,j(e.updatedAt),1),h("td",null,[h("div",P,[g(t,{onClick:e=>(e=>{Be.value=e,Se.value=!0})(a),Border:""},{default:x(()=>[y(j(s.$t("b.cha-kan-xiang-qing")),1)]),_:1},8,["onClick"]),g(t,{onClick:e=>Ee(a),Border:""},{default:x(()=>[y(j(s.$t("b.shen-he")),1)]),_:1},8,["onClick"])])])])}),128))])])])]),_:1})):f("",!0),Ie.value.length?(b(),_(i,{key:1,"current-page":qe.value.page,"total-items":qe.value.total,"page-size":qe.value.limit,onPageChange:De},null,8,["current-page","total-items","page-size"])):(b(),_(u,{key:2,title:s.$t("t.zan-wu-tie-zi"),iconSize:"64",iconColor:"#ccc",icon:z(C),class:"mt-8",action:"点击刷新",actionIcon:z(V),onActionClick:De},null,8,["title","icon","actionIcon"])),g(r,{modelValue:Se.value,"onUpdate:modelValue":n[6]||(n[6]=e=>Se.value=e)},{default:x(()=>[g(a,{class:"p-6 w-2xl max-h-[80vh] overflow-y-auto"},{default:x(()=>{var e;return[h("div",E,j(s.$t("d.ju-bao-xiang-qing")),1),h("div",F,[h("span",R,j(s.$t("d.ju-bao-mu-biao-id")),1),h("span",{class:"text-active link",onClick:n[4]||(n[4]=e=>s.$router.push({name:"postDetails",params:{postId:Ie.value[Be.value].targetId}}))},j(Ie.value[Be.value].targetId),1)]),h("div",H,[h("span",J,j(s.$t("d.ju-bao-mu-biao-lei-xing")),1),h("span",M,j(Ce[Ie.value[Be.value].targetType]),1)]),h("div",G,[h("span",K,j(s.$t("d.ju-bao-zhe-id")),1),h("div",L,[y(j(Ie.value[Be.value].creator.nickname)+" ",1),g(w,{size:"sm",user:Ie.value[Be.value].creator},null,8,["user"])])]),h("div",N,[h("span",O,j(s.$t("d.chu-li-ren-id")),1),h("div",Q,[y(j((null==(e=Ie.value[Be.value].handler)?void 0:e.nickname)??"未知")+" ",1),g(w,{size:"sm",user:Ie.value[Be.value].handler},null,8,["user"])])]),h("div",W,[h("span",X,j(s.$t("d.ju-bao-li-you")),1),h("div",Y,j(Ie.value[Be.value].reason),1)]),h("div",Z,[g(t,{class:"px-4",onClick:n[5]||(n[5]=e=>Se.value=!1),Border:""},{default:x(()=>[y(j(s.$t("b.qu-xiao")),1)]),_:1})])]}),_:1})]),_:1},8,["modelValue"]),g(r,{modelValue:Ue.value,"onUpdate:modelValue":n[12]||(n[12]=e=>Ue.value=e)},{default:x(()=>[g(a,{class:"p-6 w-2xl max-h-[80vh] overflow-y-auto"},{default:x(()=>[h("div",ee,j(s.$t("b.shen-he")),1),h("div",ae,[h("span",le,j(s.$t("d.ju-bao-mu-biao-id")),1),h("span",{class:"text-active link",onClick:n[7]||(n[7]=e=>s.$router.push({name:"postDetails",params:{postId:Ie.value[Be.value].targetId}}))},j(Ie.value[Be.value].targetId),1)]),h("div",te,[h("span",ue,j(s.$t("d.ju-bao-mu-biao-lei-xing")),1),h("span",se,j(Ce[Ie.value[Be.value].targetType]),1)]),h("div",ne,[h("span",oe,j(s.$t("d.ju-bao-zhe-id")),1),h("div",ie,[y(j(Ie.value[Be.value].creator.nickname)+" ",1),g(w,{size:"sm",user:Ie.value[Be.value].creator},null,8,["user"])])]),h("div",re,[h("span",ce,j(s.$t("d.ju-bao-li-you")),1),h("div",de,j(Ie.value[Be.value].reason),1)]),n[14]||(n[14]=h("div",{class:"border border-gray/60 mb-4"},null,-1)),h("div",ve,[h("span",pe,j(s.$t("d.she-zhi-zhuang-tai")),1),h("div",me,[g(e,{modelValue:ye.value,"onUpdate:modelValue":n[8]||(n[8]=e=>ye.value=e),options:je,placeholder:s.$t("b.quan-bu"),class:"w-40"},null,8,["modelValue","placeholder"])])]),h("div",be,[h("span",ge,j(s.$t("d.chu-li-bei-zhu")),1)]),g(l,{modelValue:Ae.value,"onUpdate:modelValue":n[9]||(n[9]=e=>Ae.value=e),placeholder:s.$t("d.qing-shu-ru-chu-li-bei-zhu"),multiline:"",rows:5,resizable:!1,class:"mt-2 mb-4"},null,8,["modelValue","placeholder"]),h("div",_e,[g(t,{class:"px-4",onClick:n[10]||(n[10]=e=>Ee(Be.value)),Border:""},{default:x(()=>[y(j(s.$t("b.ti-jiao")),1)]),_:1}),g(t,{class:"px-4",onClick:n[11]||(n[11]=e=>Ue.value=!1),Border:""},{default:x(()=>[y(j(s.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])],64))}});export{fe as default};
