import{v as e,G as a,u as t,w as l,x as s,H as o,X as r,N as n,B as u,o as i,Y as d,az as f,q as m,E as p,C as c,P as v,aA as w}from"./lucide-vue-next-DYmFLWJU.js";import{u as h}from"./store-global/drawerStore-DAE8QF9R.js";const x={class:"fixed inset-0 z-50 flex pointer-events-none"},b=e({__name:"ScDrawer",props:{modelValue:{type:Boolean},position:{}},emits:["update:modelValue"],setup(e,{emit:b}){const g=h(),y=a(),k=t();let S=null;const V=e,_=b,z=V.position??"side",{t:P}=l(),j=s(null),q=s(!1),A=s(""),B=()=>{C(),y.back()},C=()=>{if(0===g.drawers.length)return k.warning(P("d.chou-ti-zhan-yi-kong-wu-fa-guan-bi")),void E();try{g.drawers[g.drawers.length-1].close()}catch(e){}g.drawers.pop()},E=()=>{_("update:modelValue",!1),A.value=R("leave"),setTimeout(()=>{q.value=!1},200)},R=e=>({side:"translate-x-full",right:"translate-x-full",left:"-translate-x-full",bottom:"translate-y-full"}[z]||"translate-x-full");return o(()=>{g.drawers=[],S=y.beforeEach((e,a,t)=>{a.fullPath===e.fullPath&&g.drawers.length>0&&C(),t()})}),r(()=>{S?.()}),n(()=>V.modelValue,e=>{e&&(q.value=!0,A.value=R("enter"),requestAnimationFrame(()=>{A.value=""}),g.drawers.push({close:E,id:Symbol().toString()}),window.history.pushState(null,"#",document.URL))},{immediate:!0}),(e,a)=>(i(),u(w,{to:"body"},[d(m("div",x,[m("div",{class:p(["fixed inset-0 bg-black/50 backdrop-blur-sm pointer-events-auto transition-opacity",{"opacity-100":""===A.value&&q.value,"opacity-0":""!==A.value||!q.value}]),onClick:B},null,2),m("div",{ref_key:"drawerRef",ref:j,class:p(["pointer-events-auto transition-transform transform fixed shadow-xl",["bottom"===c(z)?"left-0 bottom-0 w-full max-h-[95%]":"left"===c(z)?"left-0 top-0 h-full max-w-4/5":"right-0 top-0 h-full max-w-4/5",A.value]])},[v(e.$slots,"default",{close:C})],2)],512),[[f,q.value]])]))}});export{b as _};
