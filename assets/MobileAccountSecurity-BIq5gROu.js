import{_ as e}from"./ScButton.vue_vue_type_script_setup_true_lang-BX58BrIO.js";import{_ as a}from"./Card.vue_vue_type_script_setup_true_lang-bjhPCac0.js";import{aB as s,A as l,k as o,aD as t}from"./store-module/admin/service-B8wAbs3A.js";import{u as n}from"./store-module/user/userStore-CYZokpSa.js";import{_ as i}from"./ScInput.vue_vue_type_script_setup_true_lang-BGlwauwP.js";import{v as u,w as r,u as d,x as c,H as m,f as g,o as p,B as f,I as h,C as v,D as x,q as _,g as w,A as y,J as b,F as z}from"./lucide-vue-next-DYmFLWJU.js";import{f as j}from"./store-module/post/service-BOUuDl8-.js";import{u as $,f as k}from"./store-module/user/service-DQ6CfGWp.js";import{_ as q}from"./index-Cb4mdASZ.js";import"./store-global/configStore-CQ7TO-i0.js";import"./store-module/post/postStore-7aBFqooK.js";import"./vendor-lucide-DYSNolYz.js";import"./zh-lang-UpYDLdiS.js";import"./en-lang-DIx6Q4dK.js";import"./store-global/deviceStore-KKN3G4DG.js";const V={class:"mb-4 text-xl font-bold"},P={class:"flex gap-2 items-center"},I={class:"mb-4 text-xl font-bold"},B={class:"flex gap-2 items-center"},C={class:"mb-4 text-xl font-bold"},S={class:"flex gap-2 items-center"},L={class:"w-20"},U={class:"flex gap-2 items-center"},A={class:"w-20"},D={class:"flex gap-2 items-center"},F={class:"w-20"},H={class:"flex gap-2 items-center"},J={class:"text-center text-gray-content"},M=q(u({__name:"MobileAccountSecurity",setup(u){const{t:q}=r(),M=d(),E=n(),G=c({newPassword:"",confirmPassword:"",captcha:""}),K=c(!1),N=c(q("f.huo-qu-yan-zheng-ma")),O=c(""),Q=c(""),R=e=>{K.value=!0,(e=>{let a,s=e;a=setInterval(()=>{s>0?(N.value=q("b.resend",{seconds:s}),s--):(clearInterval(a),N.value=q("f.huo-qu-yan-zheng-ma"),K.value=!1)},1e3)})(30),s({email:e}).then(e=>{200===e.data.code?M.success(q("t.yan-zheng-ma-yi-fa-song-dao-nin-de-you-xiang")):M.error(q("t.huo-qu-yan-zheng-ma-shi-bai")+e.data.msg)}).catch(e=>{M.error(e.msg)})},T=()=>{l().then(e=>{const a=e.data.data;a.headImg=o(a.headImg),a.signature=j(a.signature),O.value=a.signature||"",E.userInfo=a}).catch(e=>{})},W=()=>{G.value.newPassword===G.value.confirmPassword?t({password:G.value.newPassword,email:E.userInfo.email,captcha:G.value.captcha}).then(e=>{200===e.data.code?(M.success(q("t.mi-ma-geng-xin-cheng-gong")),G.value.newPassword="",G.value.confirmPassword="",G.value.captcha="",T()):M.error(q("t.mi-ma-geng-xin-shi-bai")+e.data.msg)}).catch(e=>{M.error(q("t.mi-ma-geng-xin-shi-bai")+e.msg)}):M.error(q("t.liang-ci-shu-ru-de-mi-ma-bu-yi-zhi"))};return m(()=>{T()}),(s,l)=>(p(),g(z,null,[v(E).isLogin?(p(),f(a,{key:0,class:"w-full"},{default:x(()=>[_("div",V,y(s.$t("d.zhang-hao-mi-yue")),1),_("div",null,y(s.$t("d.zhang-hao-mi-yue-shi-nin-zhang-hao-de-si-mi-xin-xi-yong-yu-yan-zheng-shen-fen")),1),w(i,{modelValue:Q.value,"onUpdate:modelValue":l[0]||(l[0]=e=>Q.value=e),class:"w-full",type:"text"},null,8,["modelValue"]),_("div",P,[w(e,{onClick:l[1]||(l[1]=e=>v($)(Q.value)),Border:"",class:"w-full"},{default:x(()=>[b(y(s.$t("b.geng-xin")),1)]),_:1})])]),_:1})):h("",!0),v(E).isLogin?(p(),f(a,{key:1,class:"w-full"},{default:x(()=>[_("div",I,y(s.$t("b.qiang-zhi-xia-xian")),1),_("div",null,y(s.$t("d.rang-suo-you-deng-lu-de-she-bei-qiang-zhi-xia-xian-bao-kuo-dang-qian-she-bei")),1),_("div",null,y(s.$t("d.xia-xian-hou-shi-yong-mi-ma-ke-zhong-xin-deng-lu")),1),_("div",B,[w(e,{onClick:v(k),Border:"",class:"w-full"},{default:x(()=>[b(y(s.$t("b.xia-xian")),1)]),_:1},8,["onClick"])])]),_:1})):h("",!0),v(E).isLogin?(p(),f(a,{key:2,class:"w-full"},{default:x(()=>[_("div",C,y(s.$t("f.zhong-zhi-mi-ma")),1),_("div",S,[_("span",L,y(s.$t("f.xin-mi-ma")),1),w(i,{modelValue:G.value.newPassword,"onUpdate:modelValue":l[2]||(l[2]=e=>G.value.newPassword=e),type:"password",class:"flex-1",placeholder:s.$t("f.qing-shu-ru-xin-mi-ma")},null,8,["modelValue","placeholder"])]),_("div",U,[_("span",A,y(s.$t("f.que-ren-mi-ma")),1),w(i,{modelValue:G.value.confirmPassword,"onUpdate:modelValue":l[3]||(l[3]=e=>G.value.confirmPassword=e),type:"password",class:"flex-1",placeholder:s.$t("f.qing-zai-ci-shu-ru-xin-mi-ma")},null,8,["modelValue","placeholder"])]),_("div",D,[_("span",F,y(s.$t("f.you-xiang-yan-zheng-ma")),1),w(i,{modelValue:G.value.captcha,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value.captcha=e),type:"text",class:"flex-1",placeholder:s.$t("f.qing-shu-ru-yan-zheng-ma")},null,8,["modelValue","placeholder"]),w(e,{disabled:K.value,onClick:l[5]||(l[5]=e=>R(v(E).userInfo.email)),Border:""},{default:x(()=>[b(y(N.value),1)]),_:1},8,["disabled"])]),_("div",H,[w(e,{onClick:W,Border:"",class:"w-full"},{default:x(()=>[b(y(s.$t("b.ti-jiao")),1)]),_:1})])]),_:1})):h("",!0),v(E).isLogin?h("",!0):(p(),f(a,{key:3,class:"w-full"},{default:x(()=>[_("div",J,y(s.$t("d.nin-huan-wei-deng-lu-qing-xian-deng-lu-hou-zai-jin-hang-cao-zuo")),1)]),_:1}))],64))}}),[["__scopeId","data-v-b37355a2"]]);export{M as default};
