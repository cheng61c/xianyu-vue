import{_ as e}from"./ScSelector.vue_vue_type_script_setup_true_lang-DdvKffTA.js";import{_ as a}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as l}from"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import{_ as u}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as s}from"./EmptyState.vue_vue_type_script_setup_true_lang-Bg-k0MPd.js";import{a6 as o,f as t,a7 as i,a8 as n,a9 as r,aa as d,ab as c,A as v}from"./store-module/admin/service-Dq4pkIEc.js";import{u as m}from"./store-module/user/userStore-8LCsejjm.js";import{_ as p}from"./Pagination.vue_vue_type_script_setup_true_lang-DhJQJgY1.js";import{_ as g}from"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import{_ as f}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{v as h}from"./verify-CgysHlmG.js";import{v as x,w as b,u as _,G as y,x as k,H as j,f as $,o as w,g as z,B as V,D as C,q,J as B,A as I,I as S,C as U,F as T,y as A}from"./lucide-vue-next-Cfi51zEF.js";import{S as L}from"./ScReusableTable-bT4dzU_t.js";import{_ as D}from"./ScRole.vue_vue_type_script_setup_true_lang-Bz5l_0n_.js";import{$ as P,a0 as E,_ as F}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/post/postStore-D6edmGvH.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-8C3JL_QJ.js";import"./index-CAt4bNNt.js";import"./zh-lang-UpYDLdiS.js";import"./en-lang-DIx6Q4dK.js";import"./store-global/deviceStore-KmV5dTi1.js";const M={class:"flex gap-4"},N={class:"flex gap-4"},R={class:"flex gap-2"},G={class:"flex items-center gap-2 w-full"},H={class:"flex items-center gap-2 w-full"},J={class:"font-bold"},O={class:"w-full flex items-center flex-wrap gap-2"},K={class:"flex items-center gap-2 flex-wrap min-w-20"},Q={class:"flex items-center gap-2 flex-wrap"},W={class:"text-xl mb-4"},X={class:"flex gap-4 justify-end"},Y={class:"text-xl mb-4"},Z={key:0,class:"flex items-center gap-2"},ee={class:"w-12"},ae={class:"flex items-center gap-2"},le={class:"w-12"},ue={key:1,class:"flex items-center gap-2"},se={class:"w-12"},oe={class:"flex items-center gap-2"},te={class:"w-12"},ie={class:"flex items-center gap-2"},ne={class:"text-sm text-warning flex items-center gap-1"},re={class:"flex gap-4 justify-end"},de={class:"text-xl mb-4"},ce={class:"text-warning"},ve={class:"flex items-center gap-2 flex-wrap border border-gray p-2 rounded-lg"},me={class:"flex items-center gap-2 flex-wrap border border-gray p-2 rounded-lg"},pe={key:0,class:"text-sm text-error"},ge={class:"flex gap-4 justify-end"},fe={class:"text-xl mb-4"},he={class:"flex gap-2 flex-wrap items-center"},xe={class:"flex gap-4 justify-end"},be=x({__name:"MobileAdminAccount",setup(x){const{t:be}=b(),_e=_(),ye=m(),ke=y(),je=k(["ID",be("f.ni-cheng"),be("f.yong-hu-ming"),be("f.you-xiang"),be("f.zhu-ce-shi-jian"),be("f.zui-hou-deng-lu-shi-jian"),be("f.zui-hou-deng-lu-ip"),be("f.zhuang-tai"),be("f.cao-zuo")]),$e=k(-1),we=k(""),ze=k(0),Ve=[{value:0,label:be("b.quan-bu")},{value:1,label:be("b.zheng-chang")},{value:2,label:be("b.jin-yong")}],Ce=k(0),qe=[{value:0,label:be("b.sou-suo-yong-hu-ming")},{value:1,label:be("b.sou-suo-ni-cheng")},{value:2,label:be("b.sou-suo-shang-ci-deng-lu-ip")},{value:3,label:be("b.sou-suo-you-xiang")},{value:4,label:be("b.sou-suo-id")},{value:5,label:be("b.sou-suo-bei-zhu")}],Be=k(0),Ie=k([{value:0,label:be("b.quan-bu-jiao-se")}]),Se=k({page:1,total:0,limit:10}),Ue=k([]),Te=k(!1),Ae=k(-1),Le=k(!1),De=k(!1),Pe=k([]),Ee=k(!1),Fe=k({id:0,nickname:"",email:"",remark:"",password:"",account:"",roles:[]}),Me=e=>{Se.value.page=e,Re()},Ne=()=>{Se.value.page=1,Re()},Re=()=>{const e={page:Se.value.page,limit:Se.value.limit};let a="object"==typeof Be.value?Be.value.value:Be.value,l="object"==typeof ze.value?ze.value.value:ze.value,u="object"==typeof Ce.value?Ce.value.value:Ce.value;0!==l&&(e.disabled=l),0!==a&&(e.roleId=a),we.value&&0==u&&(e.account=we.value),we.value&&1==u&&(e.nickname=we.value),we.value&&2==u&&(e.lastLoginIp=we.value),we.value&&3==u&&(e.email=we.value),we.value&&4==u&&(e.id=Number(we.value)),we.value&&5==u&&(e.remark=we.value),o(e).then(e=>{200===e.data.code&&(Ue.value=e.data.data.list.map(e=>({...e,regTime:t(e.regTime,be),lastLoginTime:t(e.lastLoginTime,be)})),Se.value.total=e.data.data.total,Se.value.page=e.data.data.page,Se.value.limit=e.data.data.limit)}).catch(e=>{})},Ge=(e,a)=>{const l=Ue.value[e];if(!Te.value)return Ae.value=e,Fe.value.remark=l.remark||"",void(Te.value=!0);n({userId:l.id,disabled:a}).then(async e=>{if(200===e.data.code){try{await r({id:l.id,remark:Fe.value.remark}),h([1,2])&&await d(l.id),_e.success(be("t.cao-zuo-cheng-gong"))}catch(a){}Re(),Te.value=!1}}).catch(e=>{})},He=e=>{const a=Ue.value[e];if(!Le.value)return Ae.value=e,void(Le.value=!0);const l={};if(""!==Fe.value.nickname.trim()&&(l.nickname=Fe.value.nickname),""!==Fe.value.email.trim()&&(l.email=Fe.value.email),""!==Fe.value.password.trim()&&(l.password=Fe.value.password),""!==Fe.value.account.trim()&&(l.account=Fe.value.account),l.id=a.id,1===Object.keys(l).length)return _e.warning(be("t.sha-ye-bu-shi-zou-le")),void(Le.value=!1);r(l).then(e=>{200===e.data.code&&(Re(),Le.value=!1,_e.success(be("t.geng-xin-yong-hu-xin-xi-cheng-gong")),a.id===ye.userInfo.id?Ke():d(a.id))}).catch(e=>{_e.error(be("t.geng-xin-yong-hu-xin-xi-shi-bai")+e.msg)})},Je=e=>{const a=Ue.value[e];if(!De.value)return Ae.value=e,Fe.value.id=a.id,Fe.value.roles=a.roles,void(De.value=!0);let l={id:a.id,roleIds:Fe.value.roles.map(e=>e.id)};c(l).then(e=>{200===e.data.code&&(Re(),De.value=!1)}).catch(e=>{_e.error(be("t.geng-xin-jiao-se-shi-bai")+e.msg)})},Oe=e=>{const a=Ue.value[e];if(!Ee.value)return Ae.value=e,void(Ee.value=!0);d(a.id).then(()=>{_e.success(be("t.cao-zuo-cheng-gong")),Re(),Ke(),Te.value=!1}).catch(e=>{_e.error(be("t.geng-xin-yong-hu-xin-xi-shi-bai")+e.msg)})},Ke=()=>{v().catch(e=>{ye.token="",ye.userInfo={},ye.isLogin=!1,ke.replace({path:"/"}),_e.error(be("t.huo-qu-yong-hu-xin-xi-shi-bai")+e.msg)})};return j(()=>{Se.value.page=1,Se.value.limit=10,Re(),i().then(e=>{200===e.data.code&&(Pe.value=e.data.data,Ie.value=[{value:0,label:be("b.quan-bu-jiao-se")},...e.data.data.map(e=>({value:e.id,label:e.name}))])}).catch(e=>{})}),(o,t)=>(w(),$(T,null,[z(a,{class:"mb-4"},{default:C(()=>[q("div",M,[z(e,{modelValue:Ce.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Ce.value=e),options:qe,placeholder:o.$t("b.sou-suo-yong-hu-ming"),class:"w-40"},null,8,["modelValue","placeholder"]),z(l,{modelValue:we.value,"onUpdate:modelValue":t[1]||(t[1]=e=>we.value=e),placeholder:o.$t("b.sou-suo")},null,8,["modelValue","placeholder"])]),q("div",N,[z(u,{class:"px-4",Border:"",onClick:Ne},{default:C(()=>[B(I(o.$t("b.sou-suo")),1)]),_:1}),z(u,{class:"px-4",Border:"",onClick:Re},{default:C(()=>[B(I(o.$t("b.shua-xin")),1)]),_:1})]),q("div",R,[q("label",G,[q("span",null,I(o.$t("b.zhuang-tai")),1),z(e,{modelValue:ze.value,"onUpdate:modelValue":t[2]||(t[2]=e=>ze.value=e),options:Ve,placeholder:o.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])]),q("label",H,[q("span",null,I(o.$t("b.jiao-se")),1),z(e,{modelValue:Be.value,"onUpdate:modelValue":t[3]||(t[3]=e=>Be.value=e),options:Ie.value,placeholder:o.$t("b.quan-bu-jiao-se"),class:"flex-1"},null,8,["modelValue","options","placeholder"])])])]),_:1}),z(a,{class:"mb-4"},{default:C(()=>[z(L,{thead:je.value,tbody:Ue.value,lockId:$e.value,"onUpdate:lockId":t[4]||(t[4]=e=>$e.value=e)},{"cell-0":C(({data:e})=>[q("span",J,I(e.id),1)]),"cell-1":C(({data:e})=>[B(I(e.nickname)+" ",1),q("div",O,[z(D,{user:e,isAll:"",size:"xs"},null,8,["user"])])]),"cell-2":C(({data:e})=>[B(I(e.account),1)]),"cell-3":C(({data:e})=>[B(I(e.email),1)]),"cell-4":C(({data:e})=>[B(I(e.regTime),1)]),"cell-5":C(({data:e})=>[B(I(e.lastLoginTime),1)]),"cell-6":C(({data:e})=>[B(I(e.lastLoginIp),1)]),"cell-7":C(({data:e})=>[q("div",K,[e.disabled?(w(),V(g,{key:0,size:"xs",status:"error"},{default:C(()=>[B(I(o.$t("b.feng-jin")),1)]),_:1})):(w(),V(g,{key:1,size:"xs",status:"success"},{default:C(()=>[B(I(o.$t("b.zheng-chang")),1)]),_:1}))])]),"cell-8":C(({index:e})=>[q("div",Q,[z(u,{onClick:a=>Ge(e),class:"border border-error text-error"},{default:C(()=>[B(I(o.$t("b.feng-jin")),1)]),_:1},8,["onClick"]),z(u,{onClick:a=>He(e),Border:""},{default:C(()=>[B(I(o.$t("b.xiu-gai-xin-xi")),1)]),_:1},8,["onClick"]),U(h)([1,2])?(w(),V(u,{key:0,onClick:a=>Je(e),Border:""},{default:C(()=>[B(I(o.$t("b.she-zhi-jiao-se")),1)]),_:1},8,["onClick"])):S("",!0),U(h)([1,2])?(w(),V(u,{key:1,onClick:a=>Oe(e),Border:""},{default:C(()=>[B(I(o.$t("b.qiang-zhi-xia-xian")),1)]),_:1},8,["onClick"])):S("",!0)])]),_:1},8,["thead","tbody","lockId"])]),_:1}),Ue.value.length?(w(),V(p,{key:0,"current-page":Se.value.page,"total-items":Se.value.total,"page-size":Se.value.limit,onPageChange:Me},null,8,["current-page","total-items","page-size"])):(w(),V(s,{key:1,title:o.$t("d.zan-wu-shu-ju"),iconSize:"64",iconColor:"#ccc",icon:U(E),class:"mt-8",action:o.$t("b.dian-ji-shua-xin"),actionIcon:U(P),onActionClick:Me},null,8,["title","icon","action","actionIcon"])),z(f,{modelValue:Te.value,"onUpdate:modelValue":t[9]||(t[9]=e=>Te.value=e)},{default:C(()=>[z(a,{class:"p-6 w-[95vw]"},{default:C(()=>[q("h3",W,I(o.$t("f.feng-jin-zhang-hao")),1),q("div",null,I(o.$t("f.feng-jin-yuan-yin")),1),z(l,{modelValue:Fe.value.remark,"onUpdate:modelValue":t[5]||(t[5]=e=>Fe.value.remark=e),placeholder:o.$t("d.shi-mo-ye-mei-you"),multiline:"",rows:12,resizable:!1,class:"mb-4 h-[20rem]"},null,8,["modelValue","placeholder"]),q("div",X,[z(u,{class:"px-4 border border-error text-error",onClick:t[6]||(t[6]=e=>Ge(Ae.value,1))},{default:C(()=>[B(I(o.$t("b.feng-jin")),1)]),_:1}),z(u,{class:"px-4",onClick:t[7]||(t[7]=e=>Ge(Ae.value,0)),Border:""},{default:C(()=>[B(I(o.$t("d.che-xiao-feng-jin")),1)]),_:1}),z(u,{class:"px-4",onClick:t[8]||(t[8]=e=>Te.value=!1),Border:""},{default:C(()=>[B(I(o.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),z(f,{modelValue:Le.value,"onUpdate:modelValue":t[16]||(t[16]=e=>Le.value=e)},{default:C(()=>[z(a,{class:"p-6 w-[95vw]"},{default:C(()=>[q("h3",Y,I(o.$t("f.xiu-gai-yong-hu-xin-xi")),1),U(h)([1,2])?(w(),$("div",Z,[q("span",ee,I(o.$t("f.yong-hu-ming")),1),z(l,{modelValue:Fe.value.account,"onUpdate:modelValue":t[10]||(t[10]=e=>Fe.value.account=e),placeholder:o.$t("f.yong-hu-ming"),class:"m-2"},null,8,["modelValue","placeholder"])])):S("",!0),q("div",ae,[q("span",le,I(o.$t("f.ni-cheng")),1),z(l,{modelValue:Fe.value.nickname,"onUpdate:modelValue":t[11]||(t[11]=e=>Fe.value.nickname=e),placeholder:o.$t("f.ni-cheng"),class:"m-2"},null,8,["modelValue","placeholder"])]),U(h)([1,2])?(w(),$("div",ue,[q("span",se,I(o.$t("f.you-xiang")),1),z(l,{modelValue:Fe.value.email,"onUpdate:modelValue":t[12]||(t[12]=e=>Fe.value.email=e),placeholder:o.$t("f.you-xiang"),class:"m-2"},null,8,["modelValue","placeholder"])])):S("",!0),q("div",oe,[q("span",te,I(o.$t("f.mi-ma")),1),z(l,{modelValue:Fe.value.password,"onUpdate:modelValue":t[13]||(t[13]=e=>Fe.value.password=e),placeholder:o.$t("f.mi-ma"),class:"m-2"},null,8,["modelValue","placeholder"])]),q("div",ie,[t[23]||(t[23]=q("div",{class:"w-12"},null,-1)),q("span",ne,[z(U(F),{size:18,class:"text-warning"}),B(" "+I(o.$t("d.dui-zi-ji-xiu-gai-mi-ma-hui-qiang-zhi-xia-xian")),1)])]),q("div",re,[z(u,{class:"px-4",onClick:t[14]||(t[14]=e=>He(Ae.value)),Border:""},{default:C(()=>[B(I(o.$t("b.ti-jiao-xiu-gai")),1)]),_:1}),z(u,{class:"px-4",onClick:t[15]||(t[15]=e=>Le.value=!1),Border:""},{default:C(()=>[B(I(o.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),z(f,{modelValue:De.value,"onUpdate:modelValue":t[19]||(t[19]=e=>De.value=e)},{default:C(()=>[z(a,{class:"p-6 w-[95vw]"},{default:C(()=>[q("h3",de,I(o.$t("d.xiu-gai-yong-hu-quan-xian")),1),q("div",ce,I(o.$t("d.dian-ji-biao-qian-tian-jia-huo-yi-chu")),1),q("div",null,I(o.$t("d.jiao-se-chi")),1),q("div",ve,[(w(!0),$(T,null,A(Pe.value,(e,a)=>(w(),V(g,{key:a,bgColor:e.color,size:"md",class:"cursor-pointer",onClick:e=>(e=>{const a=Pe.value[e];Fe.value.roles.some(e=>e.id===a.id)||Fe.value.roles.push(a)})(a)},{default:C(()=>[B(I(e.name),1)]),_:2},1032,["bgColor","onClick"]))),128))]),q("div",null,I(o.$t("d.dang-qian-cun-zai")),1),q("div",me,[(w(!0),$(T,null,A(Ue.value[Ae.value].roles,(e,a)=>(w(),V(g,{key:a,bgColor:e.color,size:"md",class:"cursor-pointer",onClick:e=>(e=>{Fe.value.roles.splice(e,1)})(a)},{default:C(()=>[B(I(e.name),1)]),_:2},1032,["bgColor","onClick"]))),128)),Ue.value[Ae.value].roles.length?S("",!0):(w(),$("span",pe,I(o.$t("other.null")),1))]),q("div",ge,[z(u,{class:"px-4",onClick:t[17]||(t[17]=e=>Je(Ae.value)),Border:""},{default:C(()=>[B(I(o.$t("b.ti-jiao-xiu-gai")),1)]),_:1}),z(u,{class:"px-4",onClick:t[18]||(t[18]=e=>De.value=!1),Border:""},{default:C(()=>[B(I(o.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),z(f,{modelValue:Ee.value,"onUpdate:modelValue":t[22]||(t[22]=e=>Ee.value=e)},{default:C(()=>[z(a,{class:"p-6 w-[95vw]"},{default:C(()=>[q("h3",fe,I(o.$t("b.qiang-zhi-xia-xian")),1),q("div",he,[B(I(o.$t("d.mu-biao-zhang-hao"))+" ",1),q("span",null,I(Ue.value[Ae.value].nickname),1),z(g,{size:"xs",status:"info"},{default:C(()=>[B(" uid: "+I(Ue.value[Ae.value].id),1)]),_:1}),(w(!0),$(T,null,A(Ue.value[Ae.value].roles,(e,a)=>(w(),V(g,{key:a,bgColor:e.color,size:"xs"},{default:C(()=>[B(I(e.name),1)]),_:2},1032,["bgColor"]))),128))]),q("div",null,I(o.$t("d.rang-gai-zhang-hao-suo-you-she-bei-shi-qu-deng-lu-zhuang-tai-ke-shi-yong-zhang-hao-mi-ma-zai-ci-deng-lu-ji-shi-mu-biao-shi-zi-ji-ye-bu-li-wai")),1),q("div",xe,[z(u,{class:"px-4",onClick:t[20]||(t[20]=e=>Oe(Ae.value)),Border:""},{default:C(()=>[B(I(o.$t("b.que-ding")),1)]),_:1}),z(u,{class:"px-4",onClick:t[21]||(t[21]=e=>Ee.value=!1),Border:""},{default:C(()=>[B(I(o.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])],64))}});export{be as default};
