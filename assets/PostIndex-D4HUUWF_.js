import{v as e,G as t,w as s,V as a,N as o,B as l,o as i,D as r,q as n,g as p,I as u,A as c,f as d,F as _,y as m,C as g,J as f,W as v,E as x,L as y,x as h,H as k}from"./lucide-vue-next-DYmFLWJU.js";import{_ as b}from"./Avatar.vue_vue_type_script_setup_true_lang-Cb42g1o5.js";import{_ as j}from"./Card.vue_vue_type_script_setup_true_lang-bjhPCac0.js";import{_ as C}from"./ScButton.vue_vue_type_script_setup_true_lang-BX58BrIO.js";import{i as P,o as S,P as w,f as B}from"./store-module/admin/service-B8wAbs3A.js";import{_ as I}from"./ScTag.vue_vue_type_script_setup_true_lang-Bc1RbIhV.js";import{_ as z}from"./ScButtonSelector.vue_vue_type_script_setup_true_lang-BEFoX2Uq.js";import{u as A,i as T}from"./fileType-CFRelH7y.js";import{l as $,i as L,b as V,s as D}from"./store-module/post/service-BOUuDl8-.js";import{_ as E}from"./ScRole.vue_vue_type_script_setup_true_lang-C07R-pjc.js";import{S as N,P as q,e as F,b as G,c as H,d as J,E as O,m as R,n as U}from"./vendor-lucide-DYSNolYz.js";import{_ as W}from"./Pagination.vue_vue_type_script_setup_true_lang-gjhKOIea.js";import{_ as K}from"./EmptyState.vue_vue_type_script_setup_true_lang-CCUTshFi.js";import{_ as M}from"./ScSearch.vue_vue_type_script_setup_true_lang-BpSojygw.js";import{u as Q}from"./store-module/post/postStore-7aBFqooK.js";import"./store-global/configStore-CQ7TO-i0.js";import"./store-module/user/userStore-CYZokpSa.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-BdPrsjnz.js";import"./ScInput.vue_vue_type_script_setup_true_lang-BGlwauwP.js";import"./store-global/deviceStore-KKN3G4DG.js";import"./ScSelector.vue_vue_type_script_setup_true_lang-5nAo2qJC.js";const X={class:"flex gap-2 items-center"},Y={class:""},Z={class:"text-sm text-gray-content"},ee={key:0,class:"flex gap-2"},te={class:"font-bold"},se={class:"text-gray-content"},ae={class:"flex justify-between mt-2"},oe={class:"flex gap-2 items-center cursor-pointer"},le=e({__name:"ItemCard",props:{post:{}},setup(e){const y=t(),{t:h}=s(),k=A(h),w=e,B=a({...w.post});o(()=>w.post,e=>{Object.assign(B,e)});const V=()=>{y.push({name:"postDetails",params:{postId:B.id}})};return(t,s)=>(i(),l(j,null,{default:r(()=>[n("div",{class:"flex gap-2 justify-between items-center align-middle cursor-pointer",onClick:V},[n("div",X,[p(b,{src:B.creator.headImg,alt:B.creator.nickname,size:24},null,8,["src","alt"]),n("span",Y,c(e.post.creator.nickname),1),e.post.creator&&e.post.creator.roles?(i(),l(E,{key:0,user:e.post.creator,size:"sm"},null,8,["user"])):u("",!0)]),n("div",Z,c(B.createdAt),1)]),n("div",{class:"line-clamp-2 cursor-pointer",onClick:V},[B.images?(i(),d("div",ee,[(i(!0),d(_,null,m(B.images,e=>(i(),l(z,{key:e,src:e,alt:B.title,class:"w-28 h-28"},null,8,["src","alt"]))),128))])):u("",!0),n("div",te,c(B.title),1),n("div",se,c(g(P)(B.content)),1)]),n("div",ae,[n("div",oe,[p(I,{size:"sm",icon:g(N),status:"info",onClick:s[0]||(s[0]=s=>t.$router.push({params:{plateId:e.post.plate.id}}))},{default:r(()=>[f(c(B.plate.name),1)]),_:1},8,["icon"]),2==B.type?(i(),l(I,{key:0,size:"sm",icon:g(T)[B.fileType],status:"info"},{default:r(()=>[f(c(g(k)[B.fileType]),1)]),_:1},8,["icon"])):u("",!0)]),n("div",{class:"flex gap-6",onClick:V},[2==B.type?(i(),l(C,{key:0,noPadding:"",noBg:"",icon:"0"==B.postVersionCount?g(q):g(F)},{default:r(()=>[f(c(B.postVersionCount),1)]),_:1},8,["icon"])):u("",!0),p(C,{noPadding:"",noBg:"",icon:g(G),class:x({"text-like":B.isLiked}),onClick:s[1]||(s[1]=v(e=>{return t=B.id,void $(h,t,()=>{B.isLiked=!B.isLiked,B.likeCount=S(Number(B.likeCount)+(B.isLiked?1:-1))});var t},["stop"]))},{default:r(()=>[f(c(B.likeCount),1)]),_:1},8,["icon","class"]),p(C,{noPadding:"",noBg:"",icon:g(H),class:x({"text-bad":B.isBaded}),onClick:s[2]||(s[2]=v(e=>{return t=B.id,void L(h,t,()=>{B.isBaded=!B.isBaded,B.badCount=S(Number(B.badCount)+(B.isBaded?1:-1))});var t},["stop"]))},{default:r(()=>[f(c(B.badCount),1)]),_:1},8,["icon","class"]),p(C,{noPadding:"",noBg:"",icon:g(J)},{default:r(()=>[f(c(B.commentCount),1)]),_:1},8,["icon"]),p(C,{noPadding:"",noBg:"",icon:g(O)},{default:r(()=>[f(c(B.views),1)]),_:1},8,["icon"])])])]),_:1}))}}),ie={class:"w-full h-full flex flex-1 flex-col pb-4 min-w-2xl"},re={key:0,class:"flex flex-col flex-grow"},ne={class:"flex-grow overflow-y-auto no-scrollbar p-1 flex flex-col gap-4"},pe={class:"flex-shrink-0 mt-2"},ue=e({__name:"PostList",setup(e){const t=y(),{t:a}=s(),r=h(t.params.plateId),u=Q(),c=e=>{u.postPage.page=e,V(+r.value,t,a)},f=(e,s,o)=>{u.searchText=e,u.isSearch=!0,u.postPage.page=1,u.postPage.total=0,u.post=[],D(e,s,o,t,a)};return o(()=>t.params,e=>{e.plateId&&(r.value=e.plateId,u.postPage.page=1,u.postPage.limit=10,V(+e.plateId,t,a))}),k(()=>{V(+t.params.plateId,t,a)}),(e,s)=>(i(),d("div",ie,[p(M,{key:"user-post-search",placeholder:e.$t("t.sou-suo-tie-zi-biao-ti"),onSearch:f,modelValue:g(u).searchText,"onUpdate:modelValue":s[0]||(s[0]=e=>g(u).searchText=e),searchType:"postList"==g(t).name?1:2,class:"m-1 mb-3"},null,8,["placeholder","modelValue","searchType"]),g(u).post.length?(i(),d("div",re,[n("ul",ne,[(i(!0),d(_,null,m(g(u).post,e=>(i(),d("li",{key:e.id},[p(le,{post:e},null,8,["post"])]))),128))]),n("div",pe,[p(W,{"current-page":g(u).postPage.page,"total-items":g(u).postPage.total,"page-size":g(u).postPage.limit,onPageChange:c},null,8,["current-page","total-items","page-size"])])])):(i(),l(K,{key:1,class:"w-full px-auto",action:e.$t("b.qian-wang-fa-tie"),actionIcon:g(R),onActionClick:s[1]||(s[1]=t=>e.$router.push({name:"publishPost"}))},null,8,["action","actionIcon"]))]))}}),ce=e({__name:"Creation",setup:e=>(e,t)=>(i(),l(j,null,{default:r(()=>[p(C,{variant:"ghost",class:"text-active",onClick:t[0]||(t[0]=t=>e.$router.push({name:"publishPost"})),icon:g(U),Border:""},{default:r(()=>[f(c(e.$t("b.fa-bu-nei-rong")),1)]),_:1},8,["icon"])]),_:1}))}),de={class:"flex flex-col gap-4 h-full w-1/5 px-1 pt-1 no-scrollbar"},_e={class:"card-title px-1.5"},me=["onClick"],ge={class:"font-bold"},fe={key:0},ve={class:"text-gray-content text-center text-sm px-1.5 py-2"},xe=e({__name:"BulletinBoard",setup(e){const{t:a}=s(),o=t(),l=h([]);return k(()=>{w("1,2,3").then(e=>{200===e.data.code&&(l.value=e.data.data.list.map(e=>(e.createdAt=B(e.createdAt,a),e.updatedAt=B(e.updatedAt,a),e)))})}),(e,t)=>(i(),d("div",de,[p(ce),p(j,{class:"flex flex-col gap-2"},{default:r(()=>[n("h2",_e,c(e.$t("d.gong-gao-lan")),1),(i(!0),d(_,null,m(l.value,t=>(i(),d("div",null,[n("div",{onClick:e=>(e=>{o.push({name:"postDetails",params:{postId:e.id}})})(t),class:"flex gap-2 items-center px-1.5 py-1 hover:bg-gray/50 rounded-md cursor-pointer transition-all"},[p(I,{status:"warning"},{default:r(()=>[f(c(e.$t("b.zhi-ding")),1)]),_:1}),n("div",ge,c(t.title),1)],8,me)]))),256)),l.value.length?u("",!0):(i(),d("div",fe,[n("div",ve,c(e.$t("d.sha-ye-mei-you-o")),1)]))]),_:1})]))}}),ye={class:"flex w-full gap-x-6 justify-between px-1 h-full"},he=e({__name:"PostIndex",setup:e=>(e,t)=>(i(),d("div",ye,[p(ue),p(xe)]))});export{he as default};
