import{_ as e}from"./ScSelector.vue_vue_type_script_setup_true_lang-DdvKffTA.js";import{_ as l}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as a}from"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import{_ as t}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as u}from"./EmptyState.vue_vue_type_script_setup_true_lang-Bg-k0MPd.js";import{ag as s,f as o,ah as i,ai as r}from"./store-module/admin/service-Dq4pkIEc.js";import{_ as n}from"./Pagination.vue_vue_type_script_setup_true_lang-DhJQJgY1.js";import{_ as d}from"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import{_ as c}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{v,w as p,x as b,H as m,f as _,o as f,g,B as h,D as x,q as $,J as y,A as j,F as k,y as V,I as z,E as C,C as w}from"./lucide-vue-next-Cfi51zEF.js";import{$ as q,a0 as B}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/user/userStore-8LCsejjm.js";import"./store-module/post/postStore-D6edmGvH.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-8C3JL_QJ.js";const S={class:"flex gap-4"},U={class:"flex gap-4"},A={class:"flex items-center gap-2 w-full"},I={class:"flex items-center gap-2 w-full"},D={class:"overflow-x-auto"},E={class:"table"},P={class:"flex items-center gap-2"},F={class:"flex items-center gap-2 flex-wrap"},H={class:"flex items-center gap-2"},J={class:"text-xl mb-4"},M={class:"flex gap-4 justify-end"},T={class:"text-xl mb-4"},G={class:"flex gap-4 justify-end"},K=v({__name:"AdminServer",setup(v){const{t:K}=p(),L=b(""),N=b(0),O=[{value:0,label:K("b.quan-bu")},{value:1,label:K("b.zheng-chang")},{value:2,label:K("b.jin-yong")},{value:3,label:K("b.yi-shen-he")}],Q=b(1),R=[{value:0,label:K("b.sou-suo-biao-ti-he-nei-rong")},{value:1,label:K("b.sou-suo-fu-wu-qi-ip")}],W=b(0),X=[{value:0,label:K("b.ge-ren-fu")},{value:1,label:K("b.she-qu-fu")}],Y={0:K("b.ge-ren-fu"),1:K("b.she-qu-fu")},Z=b(0),ee=b({page:1,total:0,limit:10}),le=b([]),ae=b(!1),te=b(-1),ue=b(""),se=b(!1),oe=e=>{ee.value.page=e,re()},ie=()=>{ee.value.page=1,re()},re=()=>{const e={},l="object"==typeof N.value?N.value.value:N.value,a="object"==typeof W.value?W.value.value:W.value,t="object"==typeof Q.value?Q.value.value:Q.value;e.page=ee.value.page,e.limit=ee.value.limit,0!==a&&(e.level=a),0!==l&&(e.status=l),L.value&&(1==t?e.url=L.value.trim():e.key=L.value.trim()),s(e).then(e=>{200===e.data.code&&(le.value=e.data.data.list.map(e=>(e.createdAt=o(e.createdAt,K),e.title=e.title.length>20?e.title.slice(0,20)+"...":e.title,e)),ee.value.limit=e.data.data.limit||10,ee.value.page=e.data.data.page||1,ee.value.total=e.data.data.total||0)}).catch(e=>{})},ne=(e,l)=>{const a=le.value[e];if(!ae.value)return te.value=e,ue.value=a.remark||"",void(ae.value=!0);i({id:a.id,status:l??(1===a.status||3===a.status?2:3),remark:ue.value}).then(e=>{200===e.data.code&&(re(),ae.value=!1)}).catch(e=>{})},de=e=>{const l=le.value[e];if(!se.value)return se.value=!0,void(te.value=e);i({id:l.id,level:Z.value}).then(e=>{200===e.data.code&&(re(),se.value=!1)}).catch(e=>{})};return m(()=>{re()}),(s,o)=>(f(),_(k,null,[g(l,{class:"mb-4"},{default:x(()=>[$("div",S,[g(e,{modelValue:Q.value,"onUpdate:modelValue":o[0]||(o[0]=e=>Q.value=e),options:R,placeholder:s.$t("b.sou-suo-biao-ti-he-nei-rong"),class:"w-40"},null,8,["modelValue","placeholder"]),g(a,{modelValue:L.value,"onUpdate:modelValue":o[1]||(o[1]=e=>L.value=e),placeholder:s.$t("b.sou-suo"),class:"w-xs"},null,8,["modelValue","placeholder"]),g(t,{class:"px-4",Border:"",onClick:ie},{default:x(()=>[y(j(s.$t("b.sou-suo")),1)]),_:1}),g(t,{class:"px-4",Border:"",onClick:re},{default:x(()=>[y(j(s.$t("b.shua-xin")),1)]),_:1})]),$("div",U,[$("label",A,[$("span",null,j(s.$t("d.fu-wu-qi-ji-bie")),1),g(e,{modelValue:W.value,"onUpdate:modelValue":o[2]||(o[2]=e=>W.value=e),options:X,placeholder:s.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])]),$("label",I,[$("span",null,j(s.$t("b.zhuang-tai")),1),g(e,{modelValue:N.value,"onUpdate:modelValue":o[3]||(o[3]=e=>N.value=e),options:O,placeholder:s.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])])])]),_:1}),g(l,{class:"mb-4"},{default:x(()=>[$("div",D,[$("table",E,[$("thead",null,[$("tr",null,[o[12]||(o[12]=$("th",null,"ID",-1)),$("th",null,j(s.$t("b.biao-ti")),1),$("th",null,j(s.$t("b.hui-fu")),1),$("th",null,j(s.$t("b.yong-hu")),1),$("th",null,j(s.$t("b.ji-bie")),1),$("th",null,j(s.$t("b.fu-wu-qi-di-zhi")),1),$("th",null,j(s.$t("b.fa-bu-shi-jian")),1),$("th",null,j(s.$t("f.zhuang-tai")),1),$("th",null,j(s.$t("b.cao-zuo")),1)])]),$("tbody",null,[(f(!0),_(k,null,V(le.value,(e,l)=>(f(),_("tr",{key:e.id},[$("th",null,j(e.id),1),$("td",null,j(e.title),1),$("td",null,j(e.version.name)+" / "+j(e.version.version),1),$("td",null,[$("div",P,[y(j(e.creator.nickname)+" ",1),g(d,{size:"xs",status:"info"},{default:x(()=>[y(" uid: "+j(e.creator.id),1)]),_:2},1024)])]),$("td",null,j(Y[e.level]),1),$("td",null,j(e.url),1),$("td",null,j(e.createdAt),1),$("td",null,[$("div",F,[2==e.status?(f(),h(d,{key:0,size:"xs",status:"error"},{default:x(()=>[y(j(s.$t("b.feng-jin")),1)]),_:1})):z("",!0),1==e.disabled?(f(),h(d,{key:1,size:"xs",status:"error"},{default:x(()=>[y(j(s.$t("b.yi-shan-chu")),1)]),_:1})):(f(),h(d,{key:2,size:"xs",status:"success"},{default:x(()=>[y(j(s.$t("b.zheng-chang")),1)]),_:1})),e.remark?(f(),h(d,{key:3,size:"xs",status:"warning"},{default:x(()=>[y(j(s.$t("b.yi-bei-zhu")),1)]),_:1})):z("",!0)])]),$("td",null,[$("div",H,[g(t,{onClick:e=>ne(l),Border:1==e.status||3==e.status,class:C({"border border-error text-error":2==e.status})},{default:x(()=>[y(j(2==e.status?s.$t("d.che-xiao-feng-jin"):s.$t("b.feng-jin")),1)]),_:2},1032,["onClick","Border","class"]),g(t,{onClick:e=>(e=>{const l=le.value[e],a=1===l.disabled;r({id:l.id,disabled:a?0:1}).then(e=>{200===e.data.code&&re()}).catch(e=>{})})(l),class:C({"border border-green text-green":1==e.disabled,"border border-error text-error":0==e.disabled})},{default:x(()=>[y(j(0==e.disabled?s.$t("b.shan-chu"):s.$t("b.hui-fu")),1)]),_:2},1032,["onClick","class"]),g(t,{onClick:e=>de(l),Border:""},{default:x(()=>[y(j(s.$t("b.xiu-gai-ji-bie")),1)]),_:1},8,["onClick"])])])]))),128))])])])]),_:1}),le.value.length?(f(),h(n,{key:0,"current-page":ee.value.page,"total-items":ee.value.total,"page-size":ee.value.limit,onPageChange:oe},null,8,["current-page","total-items","page-size"])):(f(),h(u,{key:1,title:s.$t("t.zan-wu-tie-zi"),iconSize:"64",iconColor:"#ccc",icon:w(B),class:"mt-8",action:s.$t("b.dian-ji-shua-xin"),actionIcon:w(q),onActionClick:oe},null,8,["title","icon","action","actionIcon"])),g(c,{modelValue:ae.value,"onUpdate:modelValue":o[8]||(o[8]=e=>ae.value=e)},{default:x(()=>[g(l,{class:"p-6 w-2xl"},{default:x(()=>[$("div",J,j(s.$t("d.zi-yuan-bei-zhu")),1),g(a,{modelValue:ue.value,"onUpdate:modelValue":o[4]||(o[4]=e=>ue.value=e),placeholder:s.$t("d.shi-mo-ye-mei-you"),multiline:"",rows:12,resizable:!1,class:"mt-2 mb-4 h-[20rem]"},null,8,["modelValue","placeholder"]),$("div",M,[g(t,{class:"px-4 border border-error text-error",onClick:o[5]||(o[5]=e=>ne(te.value,2))},{default:x(()=>[y(j(s.$t("b.feng-jin")),1)]),_:1}),g(t,{class:"px-4",onClick:o[6]||(o[6]=e=>ne(te.value,3)),Border:""},{default:x(()=>[y(j(s.$t("d.che-xiao-feng-jin")),1)]),_:1}),g(t,{class:"px-4",onClick:o[7]||(o[7]=e=>ae.value=!1),Border:""},{default:x(()=>[y(j(s.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),g(c,{modelValue:se.value,"onUpdate:modelValue":o[11]||(o[11]=e=>se.value=e)},{default:x(()=>[g(l,{class:"p-6 w-2xl"},{default:x(()=>[$("div",T,j(s.$t("d.xiu-gai-fu-wu-qi-ji-bie")),1),(f(),_(k,null,V(X,(e,l)=>g(t,{key:l,class:"px-4 mb-2",Border:"",activation:Z.value===e.value,onClick:l=>Z.value=e.value},{default:x(()=>[y(j(e.label),1)]),_:2},1032,["activation","onClick"])),64)),$("div",G,[g(t,{class:"px-4",onClick:o[9]||(o[9]=e=>de(te.value)),Border:""},{default:x(()=>[y(j(s.$t("b.que-ren-xiu-gai")),1)]),_:1}),g(t,{class:"px-4",onClick:o[10]||(o[10]=e=>se.value=!1),Border:""},{default:x(()=>[y(j(s.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])],64))}});export{K as default};
