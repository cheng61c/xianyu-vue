import{u as e}from"./store-module/user/userStore-8LCsejjm.js";import{f as t,o as a,q as s,v as l,w as o,x as n,F as r,y as u,z as i,A as p,B as c,C as d,D as m,g as v,E as _,G as g,u as f,H as x,I as y,J as h,r as j,K as k,S as w,L as b,M as S,N as z,O as U}from"./lucide-vue-next-Cfi51zEF.js";import{n as M,e as C,O as L}from"./store-module/admin/service-Dq4pkIEc.js";import{u as P}from"./store-global/configStore-BTeIPwoA.js";import{u as I}from"./store-global/announcementStore-CRIAGzsc.js";import{u as T}from"./store-module/message/MessageStore-C08lLcDa.js";import{u as B}from"./store-global/themeStore-CaQtZyHC.js";import{_ as N}from"./ThemeButton.vue_vue_type_script_setup_true_lang-DKa9dFAs.js";import{_ as A}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as H,a as q}from"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import{_ as $}from"./HomeNav.vue_vue_type_script_setup_true_lang-CzSU8YDk.js";import{_ as D}from"./ScLogin.vue_vue_type_script_setup_true_lang-n2_F9gFT.js";import{u as O}from"./store-module/post/postStore-D6edmGvH.js";import{_ as V}from"./index-CAt4bNNt.js";import{g as R}from"./store-module/post/service-HXTCd_Ip.js";import{_ as E}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as F}from"./PopupBox.vue_vue_type_script_setup_true_lang-8C3JL_QJ.js";import{L as G,M as J,T as K,X}from"./vendor-lucide-BLqUBl1f.js";import{_ as Y}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{u as Q}from"./store-global/deviceStore-KmV5dTi1.js";import{v as W}from"./verify-CgysHlmG.js";import{l as Z,g as ee}from"./store-module/user/service-BGP4hTQa.js";import{g as te}from"./store-module/message/service-DlgqhG3A.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Cq1EuCfW.js";import"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import"./zh-lang-UpYDLdiS.js";import"./en-lang-DIx6Q4dK.js";const ae={xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28"};function se(e,l){return a(),t("svg",ae,[...l[0]||(l[0]=[s("g",{stroke:"null"},[s("path",{d:"m13.585 23.73-.016-7.539L7.08 12.41.603 16.177l.016 7.598 6.461 3.751 6.505-3.797zm-5.847 1.893.012-5.278 4.51-2.635.012 5.267-4.534 2.646zM7.08 13.928l4.532 2.642-4.516 2.638-4.533-2.652 4.517-2.628zM1.92 17.7l4.519 2.644-.012 5.285-4.496-2.61-.011-5.32zM20.583 12.41l-6.477 3.767.016 7.598 6.462 3.751 6.504-3.797-.016-7.538-6.489-3.781zm0 1.518 4.532 2.642-4.517 2.638-4.533-2.652 4.517-2.628zM15.421 17.7l4.518 2.644-.011 5.285-4.495-2.61-.012-5.32zm5.82 7.923.011-5.278 4.51-2.635.012 5.266-4.533 2.647zM20.336 4.268 13.846.487 7.37 4.254l.016 7.597 6.461 3.752 6.505-3.797-.015-7.538zm-6.49-2.263 4.532 2.641-4.517 2.64L9.33 4.631zM8.684 5.777l4.519 2.644-.012 5.286-4.496-2.611-.011-5.32zm5.82 7.923.01-5.278 4.511-2.635.012 5.267-4.534 2.646z"})],-1)])])}const le={render:se},oe=Object.freeze(Object.defineProperty({__proto__:null,default:le,render:se},Symbol.toStringTag,{value:"Module"})),ne={class:"relative w-0 flex justify-end"},re={class:"loading-container"},ue=V(l({__name:"LoadingIcon",setup(e){const{t:l}=o(),c=n(l("b.loading"));return(e,l)=>(a(),t("div",ne,[s("div",re,[l[0]||(l[0]=s("span",{class:"loading loading-spinner loading-xs mb-0.5"},null,-1)),(a(!0),t(r,null,u(c.value,(e,s)=>(a(),t("span",{key:s,class:"loading-char",style:i({animationDelay:.1*s+"s"})},p(e),5))),128))])]))}}),[["__scopeId","data-v-3a8c074f"]]),ie=["onClick"],pe=l({__name:"LangPopupButton",setup(e){const{locale:s}=o(),l=P();return(e,o)=>(a(),c(F,{icon:d(G),"icon-size":24,noPd:"",position:"bottom"},{default:m(({close:e})=>[v(E,{class:"p-2 w-28 items-center"},{default:m(()=>[(a(!0),t(r,null,u(d(l).langs,o=>(a(),t("div",{class:_(["text-center cursor-pointer hover:text-active",{"text-active":d(l).lang.value===o.value}]),key:o.value,onClick:t=>((e=>{l.lang=e,s.value=e.value})(o),e())},p(o.label),11,ie))),128))]),_:2},1024)]),_:1},8,["icon"]))}}),ce={class:"sticky top-0 z-10 w-full mx-auto px-4 flex h-16 justify-between items-center bg-background"},de={class:"text-md text-background-content font-bold"},me={class:"flex gap-4 items-center"},ve={key:0,class:"flex justify-center w-full bg-warning/30"},_e=l({__name:"HomeHeader",setup(l){const u=T(),j=I(),k=B(),w=P(),b=O(),S=e(),z=n(null),U=n(!1),q=g(),V=n(""),E=f(),{t:F}=o(),G=R(F),Y=()=>{S.isLogin?q.push({name:"message"}):E.info(F("t.qing-xian-deng-lu"))},Q=e=>{b.nav.name=e,V.value=e},W=e=>{b.postPage.page=e},Z=()=>{U.value=!1,z.value&&q.push({name:"postDetails",params:{postId:z.value.id}})};return x(()=>{w.loading=!0,M({top:2}).then(e=>{z.value=(e=>{const t=new Set(j.popUps);return e.find(e=>!t.has(e.id))??null})(e.data.data.list),z.value&&(U.value=!0),w.loading=!1}),C().then(e=>{u.replyUnread=e.data.data.filter(e=>1===e.type),u.likesUnread=e.data.data.filter(e=>2===e.type)})}),(e,l)=>{var o;return a(),t(r,null,[s("header",ce,[s("button",{class:"flex justify-center items-center gap-2 cursor-pointer",onClick:l[0]||(l[0]=t=>e.$router.push("/"))},[v(d(oe),{class:"text-background-content",style:i({fill:d(k).darkTheme?"rgba(255, 255, 255, 0.9)":"#666666"})},null,8,["style"]),s("div",de,p(e.$t("other.title-logo")),1)]),v($,{menuItems:d(G),activeNavName:V.value,updateNav:Q,updatePage:W},null,8,["menuItems","activeNavName"]),s("div",me,[d(w).loading?(a(),c(ue,{key:0})):y("",!0),v(A,{class:_(["relative cursor-pointer",{"pr-2":d(u).replyUnread.length>0}]),icon:d(J),iconSize:25,noPd:"",onClick:Y},{default:m(()=>[d(S).isLogin&&d(u).replyUnread.length?(a(),c(H,{key:0,size:"xs",status:"error",class:"absolute top-[-4px] right-[-10%]"},{default:m(()=>[h(p(d(L)(d(u).replyUnread.length+d(u).likesUnread.length)),1)]),_:1})):y("",!0)]),_:1},8,["class","icon"]),v(A,{icon:d(K),iconSize:24,noPd:"",onClick:l[1]||(l[1]=t=>e.$router.push({name:"mingrentang"}))},null,8,["icon"]),v(N),v(pe),v(D)])]),U.value?(a(),t("div",ve,[s("span",{onClick:Z},p(null==(o=z.value)?void 0:o.title),1),v(A,{class:"ml-4",icon:d(X),onClick:l[2]||(l[2]=e=>{var t,a;return(a=null==(t=z.value)?void 0:t.id)&&(j.popUps.push(a),j.popUps=Array.from(new Set(j.popUps))),void(U.value=!1)}),noPd:"",noBg:""},null,8,["icon"])])):y("",!0)],64)}}}),ge={class:"flex-1 overflow-auto"},fe={class:"font-bold"},xe=["innerHTML"],ye={class:"flex gap-4"},he=l({__name:"PopUpAnnouncement",setup(e){const t=I(),l=Q(),o=g(),r=n(!1),u=n(null),i=()=>{var e;r.value=!1,o.push({name:"postDetails",params:{postId:null==(e=u.value)?void 0:e.id}})};return x(()=>{M({top:3}).then(e=>{u.value=(e=>{const a=new Set(t.popUps);return e.find(e=>!a.has(e.id))??null})(e.data.data.list),u.value&&(r.value=!0)})}),(e,o)=>(a(),c(Y,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e)},{default:m(()=>[v(E,{class:_(["max-h-[65dvh] flex flex-col",{"max-w-2xl ":2==d(l).device,"w-[80vw]":1==d(l).device}])},{default:m(()=>{var a,l;return[o[2]||(o[2]=s("div",{class:"text-lg font-bold text-center"},"站内公告",-1)),s("div",ge,[s("div",fe,p(null==(a=u.value)?void 0:a.title),1),s("div",{innerHTML:null==(l=u.value)?void 0:l.content,class:"tiptap w-full h-full p-4"},null,8,xe)]),s("div",ye,[v(A,{class:"flex-1",onClick:i,Border:""},{default:m(()=>[h(p(e.$t("b.cha-kan-xiang-qing")),1)]),_:1}),v(A,{class:"flex-1 text-success",onClick:o[0]||(o[0]=e=>{var a,s;return(s=null==(a=u.value)?void 0:a.id)&&(t.popUps.push(s),t.popUps=Array.from(new Set(t.popUps))),void(r.value=!1)}),Border:""},{default:m(()=>[h(p(e.$t("b.yi-yue")),1)]),_:1})])]}),_:1},8,["class"])]),_:1},8,["modelValue"]))}}),je={class:"mx-auto max-w-[1600px] pb-4 pm-4"},ke={class:"w-full mx-auto px-4 pt-1 overflow-y-auto"},we={key:0,class:"text-center"},be=l({__name:"PcIndex",setup:e=>(e,l)=>{const o=j("router-view");return a(),t("div",je,[v(_e),s("div",ke,[v(o)]),d(W)([1,2,3,4,5,6,7,8,9,10])?(a(),t("div",we," updateTime: 2025年12月1日22:14:54 ")):y("",!0),v(he)])}}),Se={class:"home-content"},ze={key:0,class:"text-center"},Ue=l({__name:"MobileIndex",setup(e){k.registerPlugin(w);const l=n(null),o=n(0);U("refreshScroll",o),U("containerRef",l);const u=b(),i=n("");return x(()=>{if(!l.value)return;const e=l.value.querySelector(".home-content");w.create({scroller:l.value,trigger:e,start:"top top",end:"bottom bottom",onUpdate:e=>{o.value=e.progress}})}),S(()=>{w.getAll().forEach(e=>e.kill())}),z(()=>u.path,e=>{i.value=e},{immediate:!0}),(e,o)=>{const n=j("RouterView");return a(),t(r,null,[s("div",{ref_key:"containerRef",ref:l,class:"overflow-y-auto overflow-x-hidden w-full h-[100dvh]"},[s("div",Se,[v(n)]),d(W)([1,2,3,4,5,6,7,8,9,10])?(a(),t("div",ze," updateTime: 2025年12月1日22:14:54 ")):y("",!0)],512),v(he)],64)}}}),Me=l({__name:"Index",setup(t){const{t:s,locale:l}=o(),n=e(),r=Q(),u=P();l.value=u.lang.value,x(async()=>{n.autoLogin?await Z():ee(),te(s)});const i=B();z(()=>i.darkTheme,e=>{q(e)},{immediate:!0});const p=e=>{u.menu.x=e.clientX,u.menu.y=e.clientY};return(e,t)=>2==d(r).device?(a(),c(be,{key:0,onContextmenu:p})):(a(),c(Ue,{key:1}))}});export{Me as default};
