import{_ as e}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as a}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as t}from"./TipTap.vue_vue_type_script_setup_true_lang-z5it9mjF.js";import{A as s,k as u,aE as i,b as r}from"./store-module/admin/service-Dq4pkIEc.js";import{u as l}from"./store-module/user/userStore-8LCsejjm.js";import{_ as o}from"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import{v as n,w as p,u as _,x as g,H as c,f as d,o as m,g as v,B as f,I as x,C as j,D as b,q as h,A as y,J as I,F as k}from"./lucide-vue-next-Cfi51zEF.js";import{_ as S}from"./MobileUserHeader.vue_vue_type_script_setup_true_lang-D8WFP6JX.js";import{f as $}from"./store-module/post/service-HXTCd_Ip.js";import{u as w}from"./store-global/deviceStore-KmV5dTi1.js";import{_ as V}from"./ScDrawer.vue_vue_type_script_setup_true_lang-BAH82y4L.js";import{_ as U}from"./index-CAt4bNNt.js";import"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import"./store-module/post/postStore-D6edmGvH.js";import"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Cq1EuCfW.js";import"./ScRole.vue_vue_type_script_setup_true_lang-Bz5l_0n_.js";import"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import"./store-global/drawerStore-BV3ZUw2h.js";import"./zh-lang-UpYDLdiS.js";import"./en-lang-DIx6Q4dK.js";const B={class:"mb-4 text-xl font-bold"},C={class:"flex gap-4 items-center"},z={class:"flex gap-4 items-center"},q={class:"flex gap-4 items-center"},A={class:"space-y-2"},E={class:"flex gap-4 items-center"},H={class:"text-center text-gray-content"},M={key:0,class:"bg-background rounded-t-lg"},T=U(n({__name:"MobileUserEdit",setup(n){const{t:U}=p(),T=_(),D=l(),F=D.userInfo,L=w(),R=g(!1),J=g(""),G=g(null),K=g(""),N=()=>{G.value&&G.value.triggerFileInput()},O=()=>{J.value=F.signature||"",R.value=!0},P=()=>{s().then(e=>{const a=e.data.data;a.headImg=u(a.headImg),a.signature=$(a.signature),J.value=a.signature||"",D.userInfo=a}).catch(e=>{})},Q=()=>{i({nickname:K.value,signature:r(F.signature)}).then(e=>{200===e.data.code?(T.success(U("t.xin-xi-geng-xin-cheng-gong")),D.userInfo.nickname=F.nickname,D.userInfo.signature=F.signature,P()):T.error(U("t.xin-xi-geng-xin-shi-bai")+e.data.msg)}).catch(e=>{T.error(U("t.xin-xi-geng-xin-shi-bai")+e.msg)})};return c(()=>{P()}),(s,u)=>(m(),d(k,null,[v(S,{ref_key:"mobileUserHeader",ref:G,onUpdateUserInfo:P,userInfo:j(F),isEdit:""},null,8,["userInfo"]),j(D).isLogin?(m(),f(a,{key:0,class:"w-full"},{default:b(()=>[h("div",B,y(s.$t("f.ji-chu-xin-xi")),1),h("div",C,[I(y(s.$t("f.you-xiang"))+" ",1),h("span",null,y(j(F).email??"null"),1)]),h("div",z,[I(y(s.$t("f.zhang-hao"))+" ",1),h("span",null,y(j(F).account??"null"),1)]),h("div",q,[h("span",null,y(s.$t("f.ni-cheng")),1),v(o,{modelValue:K.value,"onUpdate:modelValue":u[0]||(u[0]=e=>K.value=e),type:"text",placeholder:s.$t("f.qing-shu-ru-ni-cheng")},null,8,["modelValue","placeholder"])]),h("div",A,[v(e,{onClick:N,Border:"",class:"w-full"},{default:b(()=>[I(y(s.$t("b.xiu-gai-tou-xiang")),1)]),_:1}),v(e,{onClick:O,Border:"",class:"w-full"},{default:b(()=>[I(y(s.$t("b.bian-ji-zhu-ye"))+" "+y(J.value==j(F).signature?"":s.$t("b.yi-xiu-gai-qing-dian-ji-ti-jiao-bao-cun-xiu-gai")),1)]),_:1})]),h("div",E,[v(e,{onClick:Q,Border:""},{default:b(()=>[I(y(s.$t("f.ti-jiao-geng-gai")),1)]),_:1})])]),_:1})):x("",!0),j(D).isLogin?x("",!0):(m(),f(a,{key:1,class:"w-full"},{default:b(()=>[h("div",H,y(s.$t("d.nin-huan-wei-deng-lu-qing-xian-deng-lu-hou-zai-jin-hang-cao-zuo")),1)]),_:1})),v(V,{modelValue:R.value,"onUpdate:modelValue":u[2]||(u[2]=e=>R.value=e),position:"bottom"},{default:b(()=>[null!==j(F).signature?(m(),d("div",M,[v(t,{modelValue:j(F).signature,"onUpdate:modelValue":u[1]||(u[1]=e=>j(F).signature=e),"is-mobile":1==j(L).device},null,8,["modelValue","is-mobile"])])):x("",!0)]),_:1},8,["modelValue"])],64))}}),[["__scopeId","data-v-ad8f196d"]]);export{T as default};
