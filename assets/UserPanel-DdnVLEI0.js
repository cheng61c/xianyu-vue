import{A as e,k as t,o as s,f as a,B as u}from"./store-module/admin/service-Dq4pkIEc.js";import{u as r}from"./store-module/user/userStore-8LCsejjm.js";import{_ as o}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as l}from"./UserHeader.vue_vue_type_script_setup_true_lang-Mhraj-b3.js";import{b as i}from"./store-module/user/service-BGP4hTQa.js";import{v as n,w as c,x as v,L as d,U as p,H as m,N as _,f as g,o as f,B as h,I as k,C as y,D as C,q as j,g as x,A as I,J as $,F as w}from"./lucide-vue-next-Cfi51zEF.js";import{f as A}from"./store-module/post/service-HXTCd_Ip.js";import{d as S}from"./copy-C-LASiXE.js";import{at as b,d as z,e as L,au as q,V as U}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/post/postStore-D6edmGvH.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Cq1EuCfW.js";import"./ScRole.vue_vue_type_script_setup_true_lang-Bz5l_0n_.js";import"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import"./store-global/deviceStore-KmV5dTi1.js";const B={class:"stat-figure text-primary"},H={class:"stat-title"},P={class:"stat-value text-primary"},M={class:"stat-desc"},N={class:"stat-figure text-emerald-500"},T={class:"stat-title"},E={class:"stat-value text-emerald-500"},F={class:"stat-desc"},R={class:"stat-figure text-violet-500"},D={class:"stat-title"},J={class:"stat-value text-violet-500"},O={class:"stat-desc"},V={class:"stat-figure text-primary"},G={class:"stat-title"},K={class:"stat-value text-primary"},Q={class:"stat-figure text-amber-500"},W={class:"stat-title"},X={class:"stat-value text-amber-500"},Y=["innerHTML"],Z=n({__name:"UserPanel",setup(n){const{t:Z}=c(),ee=r(),te=v(S(ee.userInfo)),se=d(),ae=p(()=>!se.query.userId),ue=v(!0),re=v({data:[],likeCount:"0",count:0}),oe=v({data:[],likeCount:"0",count:0}),le=v({data:[],likeCount:"0",count:0}),ie=v({data:[],count:0}),ne=v({data:[],count:0}),ce=()=>{e().then(e=>{const s=e.data.data;s.headImg=t(s.headImg),s.signature=A(s.signature),te.value=s,ue.value=!1}).catch(e=>{ee.userInfo={},ee.token="",ee.isLogin=!1})},ve=e=>{u(e).then(e=>{const s=e.data.data;s.headImg=t(s.headImg),s.signature=A(s.signature),te.value=s,ue.value=!1}).catch(e=>{ue.value=!1})};return m(()=>{ue.value=!0,se.query.userId?ve(Number(se.query.userId)):(ce(),(async e=>{const u=await i(e);u.user.headImg=t(u.user.headImg),te.value=u.user,re.value.likeCount=s(re.value.data.reduce((e,t)=>e+t.likeCount,0)),re.value.data=u.posts.list.map(e=>{e.createdAt=a(e.createdAt,Z)}),re.value.count=u.posts.count,le.value.likeCount=s(u.resources.list.reduce((e,t)=>e+t.likeCount,0)),le.value.data=u.resources.list.map(e=>{e.createdAt=a(e.createdAt,Z)}),le.value.count=u.resources.count,ie.value.count=u.files.count,ne.value.data=u.servers.list.map(e=>{e.createdAt=a(e.createdAt,Z)}),ne.value.count=u.servers.count,oe.value.data=u.comments.list.map(e=>{e.createdAt=a(e.createdAt,Z)}),oe.value.count=u.comments.count})(ee.userInfo.id))}),_(()=>se.query,e=>{ue.value=!0,e.userId?ve(Number(e.userId)):ce()},{immediate:!0}),(e,t)=>(f(),g(w,null,[y(ee).isLogin||!ae.value?(f(),h(l,{key:0,onUpdateUserInfo:ce,isEdit:ae.value,userInfo:te.value},null,8,["isEdit","userInfo"])):k("",!0),ae.value?(f(),h(o,{key:1,class:"stats max-w-6xl min-w-4xl w-full",noCol:"",noPg:""},{default:C(()=>[j("div",{class:"stat cursor-pointer",onClick:t[0]||(t[0]=t=>e.$router.push({name:"userPost"}))},[j("div",B,[x(y(b))]),j("div",H,I(e.$t("nav.tie-zi")),1),j("div",P,I(re.value.count),1),j("div",M,[$(I(e.$t("other.zong-huo-zan"))+" ",1),j("span",null,I(re.value.likeCount),1)])]),j("div",{class:"stat cursor-pointer",onClick:t[1]||(t[1]=t=>e.$router.push({name:"userComment"}))},[j("div",N,[x(y(z))]),j("div",T,I(e.$t("nav.ping-lun")),1),j("div",E,I(oe.value.count),1),j("div",F,[$(I(e.$t("other.zong-huo-zan"))+" ",1),j("span",null,I(oe.value.likeCount),1)])]),j("div",{class:"stat cursor-pointer",onClick:t[2]||(t[2]=t=>e.$router.push({name:"userResource"}))},[j("div",R,[x(y(L))]),j("div",D,I(e.$t("nav.zi-yuan")),1),j("div",J,I(le.value.count),1),j("div",O,[$(I(e.$t("other.zong-huo-zan"))+" ",1),j("span",null,I(le.value.likeCount),1)])]),j("div",{class:"stat cursor-pointer",onClick:t[3]||(t[3]=t=>e.$router.push({name:"userFile"}))},[j("div",V,[x(y(q))]),j("div",G,I(e.$t("nav.wen-jian")),1),j("div",K,I(ie.value.count),1)]),j("div",{class:"stat cursor-pointer",onClick:t[4]||(t[4]=t=>e.$router.push({name:"userServer"}))},[j("div",Q,[x(y(U))]),j("div",W,I(e.$t("nav.fu-wu-qi")),1),j("div",X,I(ne.value.count),1)])]),_:1})):k("",!0),!y(ee).isLogin&&te.value&&!ae.value||y(ee).isLogin&&te.value&&!ae.value?(f(),h(o,{key:2,class:"stats max-w-6xl min-w-4xl w-full",noCol:""},{default:C(()=>[j("div",{innerHTML:te.value.signature||"<p>这个人很懒，什么都没有留下</p>",class:"tiptap w-full"},null,8,Y)]),_:1})):k("",!0)],64))}});export{Z as default};
