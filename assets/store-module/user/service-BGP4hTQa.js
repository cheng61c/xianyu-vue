import{z as a,A as s,B as t,C as e,n as o,D as r,E as i,F as d,G as n,H as c,I as u,k as g}from"../admin/service-Dq4pkIEc.js";import{u as m}from"./userStore-8LCsejjm.js";import{f as I}from"../post/service-HXTCd_Ip.js";import{u as f}from"../../lucide-vue-next-Cfi51zEF.js";const h=f(),p=m(),w=async()=>{u({account:p.account,password:p.password}).then(a=>{if(200===a.data.code){p.token=a.data.data.token;const s=a.data.data;s.headImg=g(s.headImg),s.signature=I(s.signature),s.roles=s.user.roles.sort((a,s)=>a.id-s.id),p.userInfo=s.user,p.isLogin=!0}}).catch(a=>{p.userInfo={},p.token="",p.isLogin=!1})},l=(s,t)=>{p.isLogin=!1,a().then(()=>{p.token="",p.userInfo={},p.autoLogin=!1,h.success(s("t.deng-chu-cheng-gong")),t&&t()}).catch(()=>{h.error(s("t.deng-chu-shi-bai"))})},y=()=>{c().then(a=>{200===a.data.code&&(h.success("操作成功"),p.logout())}).catch(a=>{h.error("操作失败"+a.msg)})},k=a=>{n(a).then(a=>{200===a.data.code&&h.success("操作成功")}).catch(a=>{h.error("操作失败"+a.msg)})},L=async()=>{s().then(a=>{if(200===a.data.code){const s=a.data.data;s.headImg=g(s.headImg),s.signature=I(s.signature),p.userInfo=s,p.isLogin=!0}}).catch(a=>{p.userInfo={},p.token="",p.isLogin=!1})},j=async a=>{const n=a===p.userInfo.id?await s():await t(a),c=a===p.userInfo.id?await e({userId:a,type:1}):await o({creatorId:a,type:1}),u=a===p.userInfo.id?await e({userId:a,type:1}):await o({creatorId:a,type:2}),g=await r({types:"1,2,3,4,5,7",page:1,limit:999}),m=await i({creatorId:p.userInfo.id,page:1,limit:999}),I=await d({uid:p.userInfo.id,page:1,limit:999});return{user:n.data.data,posts:c.data.data,resources:u.data.data,files:g.data.data,servers:m.data.data,comments:I.data.data}};export{l as a,j as b,y as f,L as g,w as l,k as u};
