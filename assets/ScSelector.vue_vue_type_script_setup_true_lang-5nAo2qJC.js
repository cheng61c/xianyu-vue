import{v as e,w as l,U as a,x as t,H as o,M as r,f as s,o as u,q as n,g as c,E as i,F as d,y as v,J as p,A as m,W as f,a3 as y,D as h,Y as b,az as g,I as x,Z as k,Q as V}from"./lucide-vue-next-DYmFLWJU.js";const w={class:"flex flex-wrap gap-1 min-h-6 w-full flex-1 overflow-hidden"},C=["onClick"],A={key:1,class:"flex items-center w-full gap-1"},K={class:"text-gray-content"},_={class:"absolute z-10 mt-1 w-full shadow-lg rounded-md border border-gray bg-background max-h-60 overflow-auto focus:outline-none"},j={key:0,class:"sticky top-0 px-2 py-1 z-2 border-b bg-background"},z=["placeholder"],B=["onClick"],L={class:"flex items-center group-hover:text-background-content"},E=["checked"],I={key:0,class:"px-3 py-2 text-sm text-center hover:text-active"},S=e({__name:"ScSelector",props:{modelValue:{default:void 0},options:{default:()=>[]},placeholder:{default:""},multiple:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},labelKey:{default:"label"},valueKey:{default:"value"},clearable:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:S}){const{t:q}=l(),U=e,$=a(()=>U.placeholder?U.placeholder:q("b.qing-xuan-ze")),D=S,F=t(null),H=t(null),J=t(!1),M=t(""),Q=e=>U.labelKey&&e[U.labelKey]?e[U.labelKey]:e.label||e.toString(),R=e=>e?U.valueKey&&e[U.valueKey]?e[U.valueKey]:e?.value??e:null,W=e=>!(!e||void 0===U.modelValue||null===U.modelValue)&&(U.multiple?!!Array.isArray(U.modelValue)&&U.modelValue.some(l=>R(l)===R(e)):R(U.modelValue)===R(e)),Y=a(()=>U.multiple||!U.modelValue?null:U.options.find(e=>R(e)===R(U.modelValue))||null),Z=a(()=>U.multiple&&U.modelValue?U.options.filter(e=>!!Array.isArray(U.modelValue)&&U.modelValue.some(l=>R(l)===R(e))):[]),G=a(()=>{if(!M.value)return U.options;const e=M.value.toLowerCase();return U.options.filter(l=>Q(l).toLowerCase().includes(e))}),N=()=>{J.value=!J.value,J.value&&U.searchable&&V(()=>{H.value?.focus()})},O=e=>{F.value&&!F.value.contains(e.target)&&(J.value=!1)};return o(()=>{document.addEventListener("click",O)}),r(()=>{document.removeEventListener("click",O)}),(l,a)=>(u(),s("div",{class:"relative bg-background",ref_key:"dropdownRef",ref:F},[n("div",{class:i(["flex items-center justify-between px-2 py-1.5 border rounded-md cursor-pointer hover:border-active",{"border-active ":J.value,"border-gray":!J.value&&!Z.value.length}]),onClick:N},[n("div",w,[e.multiple&&Z.value.length?(u(!0),s(d,{key:0},v(Z.value,e=>(u(),s("span",{key:R(e),class:"inline-flex items-center px-2 py-1 bg-gray/40 rounded-md text-sm hover:bg-active hover:text-active-content"},[p(m(Q(e))+" ",1),n("button",{type:"button",class:"ml-1 cursor-pointer hover:text-active-content",onClick:f(l=>(e=>{if(!U.multiple||!Array.isArray(U.modelValue))return;const l=U.modelValue.filter(l=>R(l)!==R(e));D("update:modelValue",l),D("change",l)})(e),["stop"])}," Ã— ",8,C)]))),128)):(u(),s("div",A,[n("span",K,m(Y.value?Q(Y.value):$.value),1)]))]),(u(),s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:i(["lucide lucide-chevron-right-icon lucide-chevron-right transform transition-transform",{"rotate-180":J.value}])},[...a[3]||(a[3]=[n("path",{d:"m6 9 6 6 6-6"},null,-1)])],2))],2),c(y,{"enter-active-class":"transition ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition  ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:h(()=>[b(n("div",_,[e.searchable?(u(),s("div",j,[b(n("input",{ref_key:"searchInput",ref:H,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),type:"text",class:"w-full p-2 text-sm border rounded-md focus:outline-none focus:ring-1 focus:ring-active focus:border-active bg-background",placeholder:l.$t("b.sou-suo")+"...",onClick:a[1]||(a[1]=f(()=>{},["stop"]))},null,8,z),[[k,M.value]])])):x("",!0),n("ul",null,[(u(!0),s(d,null,v(G.value,l=>(u(),s("li",{key:R(l),class:"px-3 py-2 text-sm cursor-pointer hover:bg-active/60 group",onClick:f(e=>(e=>{if(U.multiple){const l=Array.isArray(U.modelValue)?[...U.modelValue]:[],a=l.findIndex(l=>R(l)===R(e));a>-1?l.splice(a,1):l.push(e),D("update:modelValue",l),D("change",l)}else{if(R(U.modelValue)===R(e))return;D("update:modelValue",e),D("change",e),J.value=!1}})(l),["stop"])},[n("div",L,[e.multiple?(u(),s("input",{key:0,type:"checkbox",class:"checkbox checkbox-xs mr-2 rounded text-active group-hover:text-active-content focus:ring-active",checked:W(l),onClick:a[2]||(a[2]=f(()=>{},["stop"]))},null,8,E)):x("",!0),p(" "+m(Q(l)),1)])],8,B))),128)),0===G.value.length?(u(),s("li",I,m(l.$t("t.wu-pi-pei-jie-guo")),1)):x("",!0)])],512),[[g,J.value]])]),_:1})],512))}});export{S as _};
