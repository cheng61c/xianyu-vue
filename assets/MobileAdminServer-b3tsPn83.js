import{_ as e}from"./ScSelector.vue_vue_type_script_setup_true_lang-5nAo2qJC.js";import{_ as a}from"./Card.vue_vue_type_script_setup_true_lang-bjhPCac0.js";import{_ as l}from"./ScInput.vue_vue_type_script_setup_true_lang-BGlwauwP.js";import{_ as t}from"./ScButton.vue_vue_type_script_setup_true_lang-BX58BrIO.js";import{_ as u}from"./EmptyState.vue_vue_type_script_setup_true_lang-CCUTshFi.js";import{ag as s,f as o,ah as i,ai as r}from"./store-module/admin/service-B8wAbs3A.js";import{_ as d}from"./Pagination.vue_vue_type_script_setup_true_lang-gjhKOIea.js";import{_ as n}from"./ScTag.vue_vue_type_script_setup_true_lang-Bc1RbIhV.js";import{_ as c}from"./ScModal.vue_vue_type_script_setup_true_lang-BZwKgEH6.js";import{v as p,w as v,x as m,H as b,f as _,o as f,g,B as x,D as h,q as j,J as y,A as k,E as $,I as w,C as z,F as V,y as C}from"./lucide-vue-next-DYmFLWJU.js";import{_ as S}from"./ScRole.vue_vue_type_script_setup_true_lang-C07R-pjc.js";import{S as B}from"./ScReusableTable-Cx_fowY3.js";import{$ as q,a0 as I}from"./vendor-lucide-DYSNolYz.js";import"./store-global/configStore-CQ7TO-i0.js";import"./store-module/user/userStore-CYZokpSa.js";import"./store-module/post/postStore-7aBFqooK.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-BdPrsjnz.js";import"./index-Cb4mdASZ.js";import"./zh-lang-UpYDLdiS.js";import"./en-lang-DIx6Q4dK.js";import"./store-global/deviceStore-KKN3G4DG.js";const U={class:"flex gap-4"},A={class:"flex gap-4"},D={class:"flex gap-4 flex-wrap"},E={class:"flex items-center gap-2 w-full"},P={class:"flex items-center gap-2 w-full"},F={class:"font-bold"},M={class:"flex items-center gap-2 flex-wrap w-22"},R={class:"flex items-center gap-2 flex-wrap"},T={class:"flex items-center gap-2 flex-wrap"},H={class:"text-xl mb-4"},J={class:"flex gap-4 justify-end"},N={class:"text-xl mb-4"},G={class:"flex gap-4 justify-end"},K=p({__name:"MobileAdminServer",setup(p){const{t:K}=v(),L=m(["ID",K("b.biao-ti"),K("b.ban-ben"),K("b.yong-hu"),K("b.lei-xing"),K("b.fu-wu-qi-di-zhi"),K("b.fa-bu-shi-jian"),K("f.zhuang-tai"),K("b.cao-zuo")]),O=m(-1),Q=m(""),W=m(0),X=[{value:0,label:K("b.quan-bu")},{value:1,label:K("b.zheng-chang")},{value:2,label:K("b.jin-yong")},{value:3,label:K("b.yi-shen-he")}],Y=m(1),Z=[{value:0,label:K("b.sou-suo-biao-ti-he-nei-rong")},{value:1,label:K("b.sou-suo-fu-wu-qi-ip")}],ee=m(0),ae=[{value:0,label:K("b.ge-ren-fu")},{value:1,label:K("b.she-qu-fu")}],le={0:K("b.ge-ren-fu"),1:K("b.she-qu-fu")},te=m(0),ue=m({page:1,total:0,limit:10}),se=m([]),oe=m(!1),ie=m(-1),re=m(""),de=m(!1),ne=e=>{ue.value.page=e,pe()},ce=()=>{ue.value.page=1,pe()},pe=()=>{const e={},a="object"==typeof W.value?W.value.value:W.value,l="object"==typeof ee.value?ee.value.value:ee.value,t="object"==typeof Y.value?Y.value.value:Y.value;e.page=ue.value.page,e.limit=ue.value.limit,0!==l&&(e.level=l),0!==a&&(e.status=a),Q.value&&(1==t?e.url=Q.value.trim():e.key=Q.value.trim()),s(e).then(e=>{200===e.data.code&&(se.value=e.data.data.list.map(e=>(e.createdAt=o(e.createdAt,K),e.title=e.title.length>20?e.title.slice(0,20)+"...":e.title,e)),ue.value.limit=e.data.data.limit||10,ue.value.page=e.data.data.page||1,ue.value.total=e.data.data.total||0)}).catch(e=>{})},ve=(e,a)=>{const l=se.value[e];if(!oe.value)return ie.value=e,re.value=l.remark||"",void(oe.value=!0);i({id:l.id,status:a??(1===l.status||3===l.status?2:3),remark:re.value}).then(e=>{200===e.data.code&&(pe(),oe.value=!1)}).catch(e=>{})},me=e=>{const a=se.value[e];if(!de.value)return de.value=!0,void(ie.value=e);i({id:a.id,level:te.value}).then(e=>{200===e.data.code&&(pe(),de.value=!1)}).catch(e=>{})};return b(()=>{pe()}),(s,o)=>(f(),_(V,null,[g(a,{class:"mb-4"},{default:h(()=>[j("div",U,[g(l,{modelValue:Q.value,"onUpdate:modelValue":o[0]||(o[0]=e=>Q.value=e),placeholder:s.$t("b.sou-suo"),class:"w-full"},null,8,["modelValue","placeholder"])]),j("div",A,[g(e,{modelValue:Y.value,"onUpdate:modelValue":o[1]||(o[1]=e=>Y.value=e),options:Z,placeholder:s.$t("b.sou-suo-biao-ti-he-nei-rong"),class:"w-52"},null,8,["modelValue","placeholder"]),g(t,{class:"px-4",Border:"",onClick:ce},{default:h(()=>[y(k(s.$t("b.sou-suo")),1)]),_:1}),g(t,{class:"px-4",Border:"",onClick:pe},{default:h(()=>[y(k(s.$t("b.shua-xin")),1)]),_:1})]),j("div",D,[j("label",E,[j("span",null,k(s.$t("d.fu-wu-qi-lei-xing")),1),g(e,{modelValue:ee.value,"onUpdate:modelValue":o[2]||(o[2]=e=>ee.value=e),options:ae,placeholder:s.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])]),j("label",P,[j("span",null,k(s.$t("b.zhuang-tai")),1),g(e,{modelValue:W.value,"onUpdate:modelValue":o[3]||(o[3]=e=>W.value=e),options:X,placeholder:s.$t("b.quan-bu"),class:"flex-1"},null,8,["modelValue","placeholder"])])])]),_:1}),g(a,{class:"mb-4"},{default:h(()=>[g(B,{thead:L.value,tbody:se.value,lockId:O.value,"onUpdate:lockId":o[4]||(o[4]=e=>O.value=e)},{"cell-0":h(({data:e})=>[j("span",F,k(e.id),1)]),"cell-1":h(({data:e})=>[y(k(e.title),1)]),"cell-2":h(({data:e})=>[y(k(e.version.name)+" / "+k(e.version.version),1)]),"cell-3":h(({data:e})=>[j("div",M,[y(k(e.creator.nickname)+" ",1),g(S,{size:"xs",user:e.creator},{default:h(()=>[y(" uid: "+k(e.creator.id),1)]),_:2},1032,["user"])])]),"cell-4":h(({data:e})=>[y(k(le[e.level]),1)]),"cell-5":h(({data:e})=>[y(k(e.url),1)]),"cell-6":h(({data:e})=>[y(k(e.createdAt),1)]),"cell-7":h(({data:e})=>[j("div",R,[2==e.status?(f(),x(n,{key:0,size:"xs",status:"error"},{default:h(()=>[y(k(s.$t("b.feng-jin")),1)]),_:1})):w("",!0),1==e.disabled?(f(),x(n,{key:1,size:"xs",status:"error"},{default:h(()=>[y(k(s.$t("b.yi-shan-chu")),1)]),_:1})):(f(),x(n,{key:2,size:"xs",status:"success"},{default:h(()=>[y(k(s.$t("b.zheng-chang")),1)]),_:1})),e.remark?(f(),x(n,{key:3,size:"xs",status:"warning"},{default:h(()=>[y(k(s.$t("b.yi-bei-zhu")),1)]),_:1})):w("",!0)])]),"cell-8":h(({data:e,index:a})=>[j("div",T,[g(t,{onClick:e=>ve(a),Border:1==e.status||3==e.status,class:$({"border border-error text-error":2==e.status})},{default:h(()=>[y(k(2==e.status?s.$t("d.che-xiao-feng-jin"):s.$t("b.feng-jin")),1)]),_:2},1032,["onClick","Border","class"]),g(t,{onClick:e=>(e=>{const a=se.value[e],l=1===a.disabled;r({id:a.id,disabled:l?0:1}).then(e=>{200===e.data.code&&pe()}).catch(e=>{})})(a),class:$({"border border-green text-green":1==e.disabled,"border border-error text-error":0==e.disabled})},{default:h(()=>[y(k(0==e.disabled?s.$t("b.shan-chu"):s.$t("b.hui-fu")),1)]),_:2},1032,["onClick","class"]),g(t,{onClick:e=>me(a),Border:""},{default:h(()=>[y(k(s.$t("b.xiu-gai-ji-bie")),1)]),_:1},8,["onClick"])])]),_:1},8,["thead","tbody","lockId"])]),_:1}),se.value.length?(f(),x(d,{key:0,"current-page":ue.value.page,"total-items":ue.value.total,"page-size":ue.value.limit,onPageChange:ne},null,8,["current-page","total-items","page-size"])):(f(),x(u,{key:1,title:s.$t("t.zan-wu-tie-zi"),iconSize:"64",iconColor:"#ccc",icon:z(I),class:"mt-8",action:s.$t("b.dian-ji-shua-xin"),actionIcon:z(q),onActionClick:ne},null,8,["title","icon","action","actionIcon"])),g(c,{modelValue:oe.value,"onUpdate:modelValue":o[9]||(o[9]=e=>oe.value=e)},{default:h(()=>[g(a,{class:"w-[95vw]"},{default:h(()=>[j("div",H,k(s.$t("d.zi-yuan-bei-zhu")),1),g(l,{modelValue:re.value,"onUpdate:modelValue":o[5]||(o[5]=e=>re.value=e),placeholder:s.$t("d.shi-mo-ye-mei-you"),multiline:"",rows:12,resizable:!1,class:"mt-2 mb-4 h-[20rem]"},null,8,["modelValue","placeholder"]),j("div",J,[g(t,{class:"px-4 border border-error text-error",onClick:o[6]||(o[6]=e=>ve(ie.value,2))},{default:h(()=>[y(k(s.$t("b.feng-jin")),1)]),_:1}),g(t,{class:"px-4",onClick:o[7]||(o[7]=e=>ve(ie.value,3)),Border:""},{default:h(()=>[y(k(s.$t("d.che-xiao-feng-jin")),1)]),_:1}),g(t,{class:"px-4",onClick:o[8]||(o[8]=e=>oe.value=!1),Border:""},{default:h(()=>[y(k(s.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),g(c,{modelValue:de.value,"onUpdate:modelValue":o[12]||(o[12]=e=>de.value=e)},{default:h(()=>[g(a,{class:"w-[95vw]"},{default:h(()=>[j("div",N,k(s.$t("d.xiu-gai-fu-wu-qi-ji-bie")),1),(f(),_(V,null,C(ae,(e,a)=>g(t,{key:a,class:"px-4 mb-2",Border:"",activation:te.value===e.value,onClick:a=>te.value=e.value},{default:h(()=>[y(k(e.label),1)]),_:2},1032,["activation","onClick"])),64)),j("div",G,[g(t,{class:"px-4",onClick:o[10]||(o[10]=e=>me(ie.value)),Border:""},{default:h(()=>[y(k(s.$t("b.que-ren-xiu-gai")),1)]),_:1}),g(t,{class:"px-4",onClick:o[11]||(o[11]=e=>de.value=!1),Border:""},{default:h(()=>[y(k(s.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])],64))}});export{K as default};
