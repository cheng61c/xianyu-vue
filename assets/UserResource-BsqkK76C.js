import{v as e,w as s,u as t,x as a,G as i,H as o,f as l,o as n,g as c,B as r,I as u,C as d,D as p,q as f,A as m,F as v,y as g,W as x,J as b}from"./lucide-vue-next-Cfi51zEF.js";import{_}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{u as h}from"./store-module/user/userStore-8LCsejjm.js";import{Q as y,R as k,u as z,aF as j}from"./store-module/admin/service-Dq4pkIEc.js";import{u as w,i as $}from"./fileType-DRkYn7FT.js";import{_ as S}from"./ScButtonSelector.vue_vue_type_script_setup_true_lang-BvKCg36H.js";import{_ as C}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as P}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{_ as I}from"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import{_ as q}from"./EmptyState.vue_vue_type_script_setup_true_lang-Bg-k0MPd.js";import{_ as D}from"./ScDivider.vue_vue_type_script_setup_true_lang-DMxRFA7S.js";import{_ as B}from"./ScSearch.vue_vue_type_script_setup_true_lang-XvEeFgPM.js";import{_ as V}from"./Pagination.vue_vue_type_script_setup_true_lang-DhJQJgY1.js";import{g as L,d as R,a as T,s as A}from"./store-module/userResource/service-C4aWmEa2.js";import{u as U}from"./store-module/userResource/userResourceStore-CUCH5_iM.js";import{E,aw as F,b as G,c as Q,ax as H,e as J,x as M,w as W,k as K,g as N,m as O,o as X,ay as Y,az as Z,D as ee}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/post/postStore-D6edmGvH.js";import"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-8C3JL_QJ.js";import"./store-module/post/service-HXTCd_Ip.js";import"./store-global/deviceStore-KmV5dTi1.js";import"./ScSelector.vue_vue_type_script_setup_true_lang-DdvKffTA.js";const se={class:"text-center text-gray-content"},te={class:"flex justify-center items-center"},ae={key:0,class:"relative w-40 h-24 flex-shrink-0"},ie={class:"ml-4 flex flex-col justify-between flex-grow h-24"},oe=["onClick"],le={class:"text-sm text-gray-500"},ne={class:"flex items-center text-sm text-gray-500 space-x-4 mt-2"},ce={class:"flex gap-2 h-24 items-center justify-end flex-wrap"},re={key:2,class:"max-w-6xl min-w-4xl w-full"},ue={key:0,class:"flex flex-col gap-4"},de={class:"flex justify-between items-center"},pe={class:"text-lg font-semibold"},fe={key:0,class:"overflow-y-auto h-full"},me={key:1,class:"w-full"},ve={class:"flex font-semibold py-2 px-4 border-b border-gray-content"},ge={class:"flex-1"},xe={class:"flex-[1.2]"},be={class:"flex-1"},_e={class:"flex-1"},he={class:"flex-[1.1]"},ye={class:"flex items-center mb-2"},ke={class:"flex-1 flex"},ze={class:"flex-[1.2]"},je={class:"flex-1"},we={class:"flex-1"},$e={class:"flex-[1.1] flex gap-2 justify-end flex-wrap"},Se={class:"flex-[3] flex gap-2"},Ce={class:"self-end text-sm text-gray-content"},Pe={class:"flex-1"},Ie={class:"flex-[1.1] flex gap-2 py-1 justify-end"},qe={class:"text-lg font-bold mb-4"},De={class:""},Be={class:"mb-4"},Ve={class:"text-error"},Le={class:"flex justify-end gap-2"},Re={class:"text-lg font-bold mb-4"},Te={class:"flex gap-2"},Ae={class:""},Ue={class:"mb-4"},Ee={class:"text-error"},Fe={class:"flex justify-end gap-2"},Ge=e({__name:"UserResource",setup(e){const{t:Ge}=s(),Qe=h(),He=U(),Je=t(),Me=w(Ge),We=a(!1),Ke=a(!1),Ne=a(""),Oe=i(),Xe=(e,s,t)=>{He.pagination.page=1,A(Ge,e,s,t)},Ye=()=>{We.value=!1,Oe.push({name:"publishResource",query:{postId:He.currenPostId},params:{postId:He.currenPostId}})},Ze=()=>{const e=He.posts[He.currenPostId];e?(j(e.id).then(e=>{200===e.data.code&&(L(Ge),Je.success(Ge("t.shan-chu-cheng-gong")))}).catch(e=>{Je.error(Ge("t.qing-qiu-shi-bai")+e.msg)}),He.isDeletePost=!1):Je.error(Ge("t.tie-zi-bu-cun-zai"))},es=e=>{He.pagination.page=e,L(Ge)};return o(()=>{L(Ge)}),(e,s)=>(n(),l(v,null,[c(B,{key:"user-post-search",placeholder:e.$t("t.sou-suo-tie-zi-biao-ti"),onSearch:Xe,modelValue:Ne.value,"onUpdate:modelValue":s[0]||(s[0]=e=>Ne.value=e),searchType:2,class:"max-w-6xl min-w-4xl w-full"},null,8,["placeholder","modelValue"]),d(Qe).isLogin?u("",!0):(n(),r(_,{key:0,class:"stats max-w-6xl min-w-4xl w-full"},{default:p(()=>[f("div",se,m(e.$t("d.nin-huan-wei-deng-lu-qing-xian-deng-lu-hou-zai-jin-hang-cao-zuo")),1)]),_:1})),d(Qe).isLogin?(n(!0),l(v,{key:1},g(d(He).posts,(s,t)=>(n(),r(_,{key:s.id,class:"stats max-w-6xl min-w-4xl w-full"},{default:p(()=>[f("div",te,[s.cover?(n(),l("div",ae,[c(S,{src:s.cover,alt:e.$t("t.feng-mian-tu"),class:"w-full h-full object-cover rounded"},null,8,["src","alt"])])):u("",!0),f("div",ie,[f("div",{class:"flex items-center gap-2 break-all",onClick:x(e=>d(Oe).push({name:"postDetails",params:{postId:s.id}}),["stop"])},[b(m(s.title)+" ",1),c(I,{size:"sm",status:"info"},{default:p(()=>[b(m(d(Me)[s.fileType]),1)]),_:2},1024),1==s.status||3==s.status?(n(),r(I,{key:0,size:"sm",status:1==s.visible?"success":"warning"},{default:p(()=>[b(m(1==s.visible?e.$t("b.zheng-chang"):e.$t("b.xia-jia")),1)]),_:2},1032,["status"])):u("",!0),2==s.status?(n(),r(I,{key:1,size:"sm",status:"error"},{default:p(()=>[b(m(e.$t("b.feng-jin")),1)]),_:1})):u("",!0)],8,oe),f("div",le,m(s.createdAt),1),f("div",ne,[c(C,{class:"flex items-center",icon:d(E),iconSize:"16",noBg:"",noPd:""},{default:p(()=>[b(m(s.views),1)]),_:2},1032,["icon"]),c(C,{class:"flex items-center",icon:d(F),iconSize:"16",noBg:"",noPd:""},{default:p(()=>[b(m(s.commentCount),1)]),_:2},1032,["icon"]),c(C,{class:"flex items-center",icon:d(G),iconSize:"16",noBg:"",noPd:""},{default:p(()=>[b(m(s.likeCount),1)]),_:2},1032,["icon"]),c(C,{class:"flex items-center",icon:d(Q),iconSize:"16",noBg:"",noPd:""},{default:p(()=>[b(m(s.badCount),1)]),_:2},1032,["icon"]),c(C,{class:"flex items-center",icon:d(H),iconSize:"16",noBg:"",noPd:""},{default:p(()=>[b(m(s.heat),1)]),_:2},1032,["icon"]),c(C,{class:"flex items-center",icon:d(J),iconSize:"16",noBg:"",noPd:""},{default:p(()=>[b(m(s.postVersionCount),1)]),_:2},1032,["icon"])])]),f("div",ce,[c(C,{class:"text-sm px-4 border border-gray hover:border-active",icon:d(M),iconSize:16,onClick:t=>e.$router.push({name:"publishPost",params:{postId:s.id}})},{default:p(()=>[b(m(e.$t("b.bian-ji")),1)]),_:1},8,["icon","onClick"]),c(C,{class:"text-sm px-4 border border-gray hover:border-active",icon:d($)[s.fileType],iconSize:16,onClick:e=>{return t=s.id,He.currenPostId=t,T(Ge),void(We.value=!We.value);var t}},{default:p(()=>[b(m(e.$t("b.ban-ben")),1)]),_:1},8,["icon","onClick"]),c(C,{class:"text-sm px-4 border border-gray hover:border-active",icon:1==s.visible?d(W):d(K),iconSize:16,onClick:e=>(e=>{const s=He.posts[e];s?z({id:s.id,visible:1==s.visible?0:1}).then(e=>{200===e.data.code&&(L(Ge),Je.success(Ge("t.cao-zuo-cheng-gong")))}).catch(e=>{Je.error(Ge("t.qing-qiu-shi-bai")+e.msg)}):Je.error(Ge("t.tie-zi-bu-cun-zai"))})(t)},{default:p(()=>[b(m(1==s.visible?e.$t("b.xia-jia"):e.$t("b.fa-bu")),1)]),_:2},1032,["icon","onClick"]),c(C,{class:"text-sm text-error px-4 border border-gray hover:border-active",icon:d(N),iconSize:16,onClick:e=>(e=>{He.isDeletePost=!0,He.currenPostId=e})(t)},{default:p(()=>[b(m(e.$t("b.shan-chu")),1)]),_:1},8,["icon","onClick"])])])]),_:2},1024))),128)):u("",!0),d(Qe).isLogin?(n(),l("div",re,[Ke.value?(n(),l("div",ue,[...s[10]||(s[10]=[f("div",{class:"skeleton w-full h-20"},null,-1),f("div",{class:"skeleton w-full h-20"},null,-1),f("div",{class:"skeleton w-full h-20"},null,-1)])])):d(He).posts.length?(n(),r(V,{key:1,"current-page":d(He).pagination.page,"total-items":d(He).pagination.count,"page-size":d(He).pagination.limit,onPageChange:es},null,8,["current-page","total-items","page-size"])):u("",!0)])):u("",!0),0===d(He).posts.length&&d(Qe).isLogin?(n(),r(q,{key:3,title:e.$t("t.zan-wu-tie-zi"),description:e.$t("t.ni-huan-mei-you-fa-bu-ren-he-tie-zio"),iconSize:"64",iconColor:"#ccc",icon:d(J),class:"mt-8",action:e.$t("b.qian-wang-fa-tie"),actionIcon:d(O),onActionClick:s[1]||(s[1]=s=>e.$router.push({name:"publishPost"}))},null,8,["title","description","icon","action","actionIcon"])):u("",!0),c(P,{modelValue:We.value,"onUpdate:modelValue":s[5]||(s[5]=e=>We.value=e)},{default:p(()=>[c(_,{class:"gap-4 w-4xl h-full max-h-[80vh] overflow-y-auto"},{default:p(()=>[f("div",de,[f("h3",pe,m(e.$t("d.tie-zi-ban-ben-lie-biao")),1),c(C,{class:"text-sm",onClick:s[2]||(s[2]=e=>We.value=!1),icon:d(X),iconSize:"22",noBg:"",noPd:""},null,8,["icon"])]),0===d(He).packageList.length?(n(),l("div",fe,[c(q,{description:e.$t("d.zan-wu-ban-ben-xin-xi"),action:e.$t("b.dian-ji-tian-jia-ban-ben"),actionIcon:d(Y),actionIconSize:"20",onActionClick:s[3]||(s[3]=e=>Ye())},null,8,["description","action","actionIcon"])])):u("",!0),d(He).packageList.length?(n(),l("div",me,[f("div",ve,[f("div",ge,m(e.$t("b.ban-ben")),1),f("div",xe,m(e.$t("b.biao-ti")),1),f("div",be,m(e.$t("b.wen-jian-shu")),1),f("div",_e,m(e.$t("b.chuang-jian-shi-jian")),1),f("div",he,m(e.$t("b.cao-zuo")),1)]),(n(!0),l(v,null,g(d(He).packageList,(s,t)=>(n(),l("div",{class:"w-full py-2 px-4 border-b border-gray-content",key:t},[f("div",ye,[f("div",ke,[c(I,{type:s.fileType,size:"sm",status:"info"},{default:p(()=>[b(" v "+m(s.version),1)]),_:2},1032,["type"])]),f("div",ze,m(s.title),1),f("div",je,m(s.files.length),1),f("div",we,m(s.createdAt),1),f("div",$e,[c(C,{class:"text-sm px-4 border border-gray",icon:d(M),iconSize:16,onClick:e=>{return t=s.id,We.value=!1,void Oe.push({name:"publishResource",query:{resourceId:t},params:{postId:He.currenPostId}});var t}},{default:p(()=>[b(m(e.$t("b.bian-ji")),1)]),_:1},8,["icon","onClick"]),c(C,{class:"text-sm text-error px-4 border hover:border-active",icon:d(N),iconSize:16,onClick:e=>{return s=t,He.isDeletePkg=!0,void(He.currenPostId=s);var s}},{default:p(()=>[b(m(e.$t("b.shan-chu")),1)]),_:1},8,["icon","onClick"])])]),(n(!0),l(v,null,g(s.files,(s,t)=>(n(),l("div",{key:t,class:"flex items-center cursor-pointer hover:bg-gray-content/20"},[f("div",Se,[c(d(Z),{size:24}),f("div",null,m(s.filename),1),f("div",Ce,m(d(y)(s.size)),1)]),f("div",Pe,[b(m(e.$t("d.xia-zai-ci-shu"))+" ",1),f("span",null,m(s.downloadCount),1)]),f("div",Ie,[c(C,{class:"text-sm px-4 border hover:border-active",icon:d(ee),iconSize:16,noPd:"",onClick:e=>d(k).download(s.url)},{default:p(()=>[b(m(e.$t("b.xia-zai")),1)]),_:1},8,["icon","onClick"])])]))),128))]))),128))])):u("",!0),d(He).packageList.length?(n(),r(C,{key:2,class:"w-full",onClick:s[4]||(s[4]=e=>Ye()),icon:d(Y),iconSize:"20",noBg:"",Border:""},{default:p(()=>[b(m(e.$t("b.tian-jia-xin-ban-ben")),1)]),_:1},8,["icon"])):u("",!0)]),_:1})]),_:1},8,["modelValue"]),c(P,{modelValue:d(He).isDeletePost,"onUpdate:modelValue":s[7]||(s[7]=e=>d(He).isDeletePost=e)},{default:p(()=>[c(_,{class:"max-w-2xl"},{default:p(()=>[f("div",qe,m(e.$t("t.que-ren-shan-chu-tie-zi")),1),f("div",De,[b(m(e.$t("t.tie-zi-biao-ti"))+" ",1),f("span",null,m(d(He).posts[d(He).currenPostId].title),1)]),f("div",Be,[f("span",null,m(e.$t("d.ni-que-ding-yao-shan-chu-ci-tie-zi-ma")),1),f("span",Ve,m(e.$t("d.ci-cao-zuo-wu-fa-che-hui")),1)]),c(D),f("div",Le,[c(C,{class:"text-sm border",onClick:s[6]||(s[6]=e=>d(He).isDeletePost=!1)},{default:p(()=>[b(m(e.$t("b.qu-xiao")),1)]),_:1}),c(C,{class:"text-sm text-error border",onClick:Ze},{default:p(()=>[b(m(e.$t("b.que-ren-shan-chu")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),c(P,{modelValue:d(He).isDeletePkg,"onUpdate:modelValue":s[9]||(s[9]=e=>d(He).isDeletePkg=e)},{default:p(()=>[c(_,{class:"max-w-2xl"},{default:p(()=>[f("div",Re,m(e.$t("d.que-ding-shan-chu-ban-ben")),1),f("div",Te,[b(m(e.$t("b.ban-ben-hao"))+" ",1),c(I,{type:d(He).packageList[d(He).currenPkgId].fileType,size:"sm",status:"info"},{default:p(()=>[b(" v "+m(d(He).packageList[d(He).currenPkgId].version),1)]),_:1},8,["type"])]),f("div",Ae,[b(m(e.$t("d.ban-ben-biao-ti"))+" ",1),f("span",null,m(d(He).packageList[d(He).currenPkgId].title),1)]),f("div",Ue,[f("span",null,m(e.$t("d.ni-que-ding-yao-shan-chu-ci-ban-ben-ma")),1),f("span",Ee,m(e.$t("d.ci-cao-zuo-wu-fa-che-hui")),1)]),c(D),f("div",Fe,[c(C,{class:"text-sm border",onClick:s[8]||(s[8]=e=>d(He).isDeletePkg=!1)},{default:p(()=>[b(m(e.$t("b.qu-xiao")),1)]),_:1}),c(C,{class:"text-sm text-error border",onClick:d(R)},{default:p(()=>[b(m(e.$t("b.que-ren-shan-chu")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"])],64))}});export{Ge as default};
