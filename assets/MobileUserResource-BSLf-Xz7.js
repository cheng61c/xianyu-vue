import{v as e,w as s,u as t,x as a,G as l,H as i,f as o,o as n,g as r,B as c,I as u,C as d,D as p,q as f,A as m,F as g,y as v,W as _,J as x}from"./lucide-vue-next-Cfi51zEF.js";import{_ as b}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{u as y}from"./store-module/user/userStore-8LCsejjm.js";import{Q as h,R as k,u as z,aF as j}from"./store-module/admin/service-Dq4pkIEc.js";import{u as w,i as C}from"./fileType-DRkYn7FT.js";import{_ as P}from"./ScButtonSelector.vue_vue_type_script_setup_true_lang-BvKCg36H.js";import{_ as S}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as $}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{_ as I}from"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import{_ as q}from"./EmptyState.vue_vue_type_script_setup_true_lang-Bg-k0MPd.js";import{_ as D}from"./ScDivider.vue_vue_type_script_setup_true_lang-DMxRFA7S.js";import{_ as B}from"./ScSearch.vue_vue_type_script_setup_true_lang-XvEeFgPM.js";import{_ as V}from"./Pagination.vue_vue_type_script_setup_true_lang-DhJQJgY1.js";import{g as L,d as T,a as R,s as A}from"./store-module/userResource/service-C4aWmEa2.js";import{u as U}from"./store-module/userResource/userResourceStore-CUCH5_iM.js";import{E,aw as F,b as G,c as M,ax as Q,e as H,x as J,w as W,k as K,g as N,m as O,o as X,ay as Y,az as Z,D as ee}from"./vendor-lucide-BLqUBl1f.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/post/postStore-D6edmGvH.js";import"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import"./PopupBox.vue_vue_type_script_setup_true_lang-8C3JL_QJ.js";import"./store-module/post/service-HXTCd_Ip.js";import"./store-global/deviceStore-KmV5dTi1.js";import"./ScSelector.vue_vue_type_script_setup_true_lang-DdvKffTA.js";const se={class:"text-center text-gray-content"},te={class:"flex gap-2"},ae={key:0,class:"relative w-28 flex-shrink-0"},le={key:1,class:"relative w-28 flex-shrink-0 flex justify-center items-center"},ie={class:"flex flex-col gap-2 w-full"},oe=["onClick"],ne={class:"font-bold break-all"},re={class:"flex items-center gap-1 flex-shrink-0"},ce={class:"flex w-full items-center gap-2 justify-between"},ue={class:"text-end text-sm text-gray-content"},de={class:"line-clamp-3 break-all"},pe={class:"flex justify-between items-center space-x-4 pt-2 border-t border-gray/40"},fe={class:"flex gap-1 items-center text-gray-content"},me={class:"flex gap-1 items-center text-gray-content"},ge={class:"flex gap-1 items-center text-gray-content"},ve={class:"flex gap-1 items-center text-gray-content"},_e={class:"flex gap-1 items-center text-gray-content"},xe={class:"flex gap-1 items-center text-gray-content"},be={class:"flex gap-1 items-center justify-end flex-wrap border-t border-gray/40 pt-2 w-full"},ye={key:2,class:"w-full"},he={key:0,class:"flex flex-col gap-4"},ke={class:"flex justify-between items-center"},ze={class:"text-lg font-semibold"},je={key:0,class:"overflow-y-auto h-full"},we={key:1,class:"w-full"},Ce={class:"flex items-center gap-2 mb-2"},Pe={class:"flex-1"},Se={class:"text-gray-content flex-shrink-0 text-end"},$e={class:"flex gap-2 justify-end flex-wrap"},Ie={class:"flex-[3] flex gap-2"},qe={class:"self-end text-sm text-gray-content"},De={class:"flex gap-2 py-1 justify-end"},Be={class:"text-lg font-bold mb-4"},Ve={class:""},Le={class:"mb-4"},Te={class:"text-error"},Re={class:"flex justify-end gap-2"},Ae={class:"text-lg font-bold mb-4"},Ue={class:"flex gap-2"},Ee={class:""},Fe={class:"mb-4"},Ge={class:"text-error"},Me={class:"flex justify-end gap-2"},Qe=e({__name:"MobileUserResource",setup(e){const{t:Qe}=s(),He=y(),Je=U(),We=t(),Ke=w(Qe),Ne=a(!1),Oe=a(!1),Xe=a(""),Ye=l(),Ze=(e,s,t)=>{Je.pagination.page=1,A(Qe,e,s,t)},es=()=>{Ne.value=!1,Ye.push({name:"publishResource",query:{postId:Je.currenPostId},params:{postId:Je.currenPostId}})},ss=()=>{const e=Je.posts[Je.currenPostId];e?(j(e.id).then(e=>{200===e.data.code&&(L(Qe),We.success(Qe("t.shan-chu-cheng-gong")))}).catch(e=>{We.error(Qe("t.qing-qiu-shi-bai")+e.msg)}),Je.isDeletePost=!1):We.error(Qe("t.tie-zi-bu-cun-zai"))},ts=e=>{Je.pagination.page=e,L(Qe)};return i(()=>{L(Qe)}),(e,s)=>(n(),o(g,null,[r(B,{key:"user-post-search",placeholder:e.$t("t.sou-suo-tie-zi-biao-ti"),onSearch:Ze,modelValue:Xe.value,"onUpdate:modelValue":s[0]||(s[0]=e=>Xe.value=e),searchType:2,class:"w-full"},null,8,["placeholder","modelValue"]),d(He).isLogin?u("",!0):(n(),c(b,{key:0,class:"w-full"},{default:p(()=>[f("div",se,m(e.$t("d.nin-huan-wei-deng-lu-qing-xian-deng-lu-hou-zai-jin-hang-cao-zuo")),1)]),_:1})),d(He).isLogin?(n(!0),o(g,{key:1},v(d(Je).posts,(s,t)=>(n(),c(b,{key:s.id,class:"w-full"},{default:p(()=>[f("div",te,[s.cover?(n(),o("div",ae,[r(P,{src:s.cover,alt:e.$t("t.feng-mian-tu"),class:"w-full h-full object-cover rounded"},null,8,["src","alt"])])):(n(),o("div",le,[r(S,{icon:d(C)[s.fileType],"icon-size":40},null,8,["icon"])])),f("div",ie,[f("div",{class:"flex items-center gap-2 flex-grow",onClick:_(t=>e.$router.push({name:"postDetails",params:{postId:s.id}}),["stop"])},[f("span",ne,m(s.title),1),f("div",re,[r(I,{size:"sm",status:"info"},{default:p(()=>[x(m(d(Ke)[s.fileType]),1)]),_:2},1024),1==s.status||3==s.status?(n(),c(I,{key:0,size:"sm",status:1==s.visible?"success":"warning"},{default:p(()=>[x(m(1==s.visible?"正常":"下架"),1)]),_:2},1032,["status"])):u("",!0),2==s.status?(n(),c(I,{key:1,size:"sm",status:"error"},{default:p(()=>[x(m(e.$t("b.feng-jin")),1)]),_:1})):u("",!0)])],8,oe),f("div",ce,[f("div",ue,m(s.createdAt),1)]),f("div",de,m(s.content),1)])]),f("div",pe,[r(S,{class:"flex items-center",noBg:"",noPd:""},{default:p(()=>[f("div",fe,[r(d(E),{size:18}),f("span",null,m(s.views),1)])]),_:2},1024),r(S,{class:"flex items-center",noBg:"",noPd:""},{default:p(()=>[f("div",me,[r(d(F),{size:18}),f("span",null,m(s.commentCount),1)])]),_:2},1024),r(S,{class:"flex items-center",noBg:"",noPd:""},{default:p(()=>[f("div",ge,[r(d(G),{size:18}),f("span",null,m(s.likeCount),1)])]),_:2},1024),r(S,{class:"flex items-center",noBg:"",noPd:""},{default:p(()=>[f("div",ve,[r(d(M),{size:18}),f("span",null,m(s.badCount),1)])]),_:2},1024),r(S,{noBg:"",noPd:""},{default:p(()=>[f("div",_e,[r(d(Q),{size:18}),f("span",null,m(s.heat),1)])]),_:2},1024),r(S,{noBg:"",noPd:""},{default:p(()=>[f("div",xe,[r(d(H),{size:18}),f("span",null,m(s.postVersionCount),1)])]),_:2},1024)]),f("div",be,[r(S,{class:"text-sm px-4 border border-gray hover:border-active",icon:d(J),iconSize:16,onClick:t=>e.$router.push({name:"publishPost",params:{postId:s.id}})},{default:p(()=>[x(m(e.$t("b.bian-ji")),1)]),_:1},8,["icon","onClick"]),r(S,{class:"text-sm px-4 border border-gray hover:border-active",icon:d(C)[s.fileType],iconSize:16,onClick:e=>{return t=s.id,Je.currenPostId=t,R(Qe),void(Ne.value=!Ne.value);var t}},{default:p(()=>[x(m(e.$t("b.ban-ben")),1)]),_:1},8,["icon","onClick"]),r(S,{class:"text-sm px-4 border border-gray hover:border-active",icon:1==s.visible?d(W):d(K),iconSize:16,onClick:e=>(e=>{const s=Je.posts[e];s?z({id:s.id,visible:1==s.visible?0:1}).then(e=>{200===e.data.code&&(L(Qe),We.success(Qe("t.cao-zuo-cheng-gong")))}).catch(e=>{We.error(Qe("t.qing-qiu-shi-bai")+e.msg)}):We.error(Qe("t.tie-zi-bu-cun-zai"))})(t)},{default:p(()=>[x(m(1==s.visible?"下架":"发布"),1)]),_:2},1032,["icon","onClick"]),r(S,{class:"text-sm text-error px-4 border border-gray hover:border-active",icon:d(N),iconSize:16,onClick:e=>(e=>{Je.isDeletePost=!0,Je.currenPostId=e})(t)},{default:p(()=>[x(m(e.$t("b.shan-chu")),1)]),_:1},8,["icon","onClick"])])]),_:2},1024))),128)):u("",!0),d(He).isLogin?(n(),o("div",ye,[Oe.value?(n(),o("div",he,[...s[10]||(s[10]=[f("div",{class:"skeleton w-full h-20"},null,-1),f("div",{class:"skeleton w-full h-20"},null,-1),f("div",{class:"skeleton w-full h-20"},null,-1)])])):d(Je).posts.length?(n(),c(V,{key:1,"current-page":d(Je).pagination.page,"total-items":d(Je).pagination.count,"page-size":d(Je).pagination.limit,onPageChange:ts},null,8,["current-page","total-items","page-size"])):u("",!0)])):u("",!0),0===d(Je).posts.length&&d(He).isLogin?(n(),c(q,{key:3,title:e.$t("t.zan-wu-tie-zi"),description:"你还没有发布任何帖子哦~",iconSize:"64",iconColor:"#ccc",icon:d(H),class:"mt-8",action:"前往发帖",actionIcon:d(O),onActionClick:s[1]||(s[1]=s=>e.$router.push({name:"publishPost"}))},null,8,["title","icon","actionIcon"])):u("",!0),r($,{modelValue:Ne.value,"onUpdate:modelValue":s[5]||(s[5]=e=>Ne.value=e)},{default:p(()=>[r(b,{class:"gap-4 w-[95vw] h-full max-h-[95dvh] overflow-y-auto"},{default:p(()=>[f("div",ke,[f("h3",ze,m(e.$t("d.tie-zi-ban-ben-lie-biao")),1),r(S,{class:"text-sm",onClick:s[2]||(s[2]=e=>Ne.value=!1),icon:d(X),iconSize:"22",noBg:"",noPd:""},null,8,["icon"])]),0===d(Je).packageList.length?(n(),o("div",je,[r(q,{description:"暂无版本信息",action:"点击添加版本",actionIcon:d(Y),actionIconSize:"20",onActionClick:s[3]||(s[3]=e=>es())},null,8,["actionIcon"])])):u("",!0),d(Je).packageList.length?(n(),o("div",we,[(n(!0),o(g,null,v(d(Je).packageList,(s,t)=>(n(),o("div",{class:"w-full py-2 border-b border-gray-content",key:t},[f("div",Ce,[r(I,{type:s.fileType,size:"sm",status:"info"},{default:p(()=>[x(" v "+m(s.version),1)]),_:2},1032,["type"]),f("div",Pe,m(s.title),1),f("div",Se,m(s.createdAt),1)]),f("div",$e,[r(S,{class:"text-sm px-4 border border-gray",icon:d(J),iconSize:16,onClick:e=>{return t=s.id,Ne.value=!1,void Ye.push({name:"publishResource",query:{resourceId:t},params:{postId:Je.currenPostId}});var t}},{default:p(()=>[x(m(e.$t("b.bian-ji")),1)]),_:1},8,["icon","onClick"]),r(S,{class:"text-sm text-error px-4 border hover:border-active",icon:d(N),iconSize:16,onClick:e=>{return s=t,Je.isDeletePkg=!0,void(Je.currenPostId=s);var s}},{default:p(()=>[x(m(e.$t("b.shan-chu")),1)]),_:1},8,["icon","onClick"])]),(n(!0),o(g,null,v(s.files,(e,s)=>(n(),o("div",{key:s,class:"flex items-center cursor-pointer hover:bg-gray-content/20"},[f("div",Ie,[r(d(Z),{size:24}),f("div",null,m(e.filename),1),f("div",qe,m(d(h)(e.size)),1)]),f("div",De,[r(S,{class:"px-4",icon:d(ee),iconSize:18,onClick:s=>d(k).download(e.url)},{default:p(()=>[x(m(e.downloadCount),1)]),_:2},1032,["icon","onClick"])])]))),128))]))),128))])):u("",!0),d(Je).packageList.length?(n(),c(S,{key:2,class:"w-full",onClick:s[4]||(s[4]=e=>es()),icon:d(Y),iconSize:"20",noBg:"",Border:""},{default:p(()=>[x(m(e.$t("b.tian-jia-xin-ban-ben")),1)]),_:1},8,["icon"])):u("",!0)]),_:1})]),_:1},8,["modelValue"]),r($,{modelValue:d(Je).isDeletePost,"onUpdate:modelValue":s[7]||(s[7]=e=>d(Je).isDeletePost=e)},{default:p(()=>[r(b,{class:"max-w-2xl"},{default:p(()=>[f("div",Be,m(e.$t("t.que-ren-shan-chu-tie-zi")),1),f("div",Ve,[x(m(e.$t("t.tie-zi-biao-ti"))+" ",1),f("span",null,m(d(Je).posts[d(Je).currenPostId].title),1)]),f("div",Le,[f("span",null,m(e.$t("d.ni-que-ding-yao-shan-chu-ci-tie-zi-ma")),1),f("span",Te,m(e.$t("d.ci-cao-zuo-wu-fa-che-hui")),1)]),r(D),f("div",Re,[r(S,{class:"text-sm border",onClick:s[6]||(s[6]=e=>d(Je).isDeletePost=!1)},{default:p(()=>[x(m(e.$t("b.qu-xiao")),1)]),_:1}),r(S,{class:"text-sm text-error border",onClick:ss},{default:p(()=>[x(m(e.$t("b.que-ren-shan-chu")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),r($,{modelValue:d(Je).isDeletePkg,"onUpdate:modelValue":s[9]||(s[9]=e=>d(Je).isDeletePkg=e)},{default:p(()=>[r(b,{class:"max-w-2xl"},{default:p(()=>[f("div",Ae,m(e.$t("d.que-ding-shan-chu-ban-ben")),1),f("div",Ue,[x(m(e.$t("b.ban-ben-hao"))+" ",1),r(I,{type:d(Je).packageList[d(Je).currenPostId].fileType,size:"sm",status:"info"},{default:p(()=>[x(" v "+m(d(Je).packageList[d(Je).currenPostId].version),1)]),_:1},8,["type"])]),f("div",Ee,[x(m(e.$t("d.ban-ben-biao-ti"))+" ",1),f("span",null,m(d(Je).packageList[d(Je).currenPostId].title),1)]),f("div",Fe,[f("span",null,m(e.$t("d.ni-que-ding-yao-shan-chu-ci-ban-ben-ma")),1),f("span",Ge,m(e.$t("d.ci-cao-zuo-wu-fa-che-hui")),1)]),r(D),f("div",Me,[r(S,{class:"text-sm border",onClick:s[8]||(s[8]=e=>d(Je).isDeletePkg=!1)},{default:p(()=>[x(m(e.$t("b.qu-xiao")),1)]),_:1}),r(S,{class:"text-sm text-error border",onClick:d(T)},{default:p(()=>[x(m(e.$t("b.que-ren-shan-chu")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"])],64))}});export{Qe as default};
