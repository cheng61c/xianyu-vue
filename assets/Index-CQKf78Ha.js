import{u as e}from"./store-module/user/userStore-CYZokpSa.js";import{f as t,o as a,q as s,v as o,w as l,x as n,F as r,y as u,z as i,A as p,B as c,C as m,D as d,g as v,E as _,G as g,u as f,H as x,I as y,J as h,r as j,K as k,S as w,L as b,M as S,N as z,O as U}from"./lucide-vue-next-DYmFLWJU.js";import{n as M,e as C,O as L}from"./store-module/admin/service-B8wAbs3A.js";import{u as P}from"./store-global/configStore-CQ7TO-i0.js";import{u as I}from"./store-global/announcementStore-lbg3oe27.js";import{u as T}from"./store-module/message/MessageStore-Dkrp6npZ.js";import{u as B}from"./store-global/themeStore-CFolaKv5.js";import{_ as N}from"./ThemeButton.vue_vue_type_script_setup_true_lang-FaOhNarc.js";import{_ as A}from"./ScButton.vue_vue_type_script_setup_true_lang-BX58BrIO.js";import{_ as H,a as q}from"./ScTag.vue_vue_type_script_setup_true_lang-Bc1RbIhV.js";import{_ as $}from"./HomeNav.vue_vue_type_script_setup_true_lang-BaWJyHDl.js";import{_ as D}from"./ScLogin.vue_vue_type_script_setup_true_lang-Dva0C4O3.js";import{u as O}from"./store-module/post/postStore-7aBFqooK.js";import{_ as V}from"./index-Cb4mdASZ.js";import{g as R}from"./store-module/post/service-BOUuDl8-.js";import{_ as E}from"./Card.vue_vue_type_script_setup_true_lang-bjhPCac0.js";import{_ as F}from"./PopupBox.vue_vue_type_script_setup_true_lang-BdPrsjnz.js";import{L as G,M as J,T as K,X}from"./vendor-lucide-DYSNolYz.js";import{_ as Y}from"./ScModal.vue_vue_type_script_setup_true_lang-BZwKgEH6.js";import{u as Q}from"./store-global/deviceStore-KKN3G4DG.js";import{v as W}from"./verify-DJBR8yD7.js";import{l as Z,g as ee}from"./store-module/user/service-DQ6CfGWp.js";import{g as te}from"./store-module/message/service-DNfPyhLJ.js";import"./Avatar.vue_vue_type_script_setup_true_lang-Cb42g1o5.js";import"./ScInput.vue_vue_type_script_setup_true_lang-BGlwauwP.js";import"./zh-lang-UpYDLdiS.js";import"./en-lang-DIx6Q4dK.js";const ae={xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28"};function se(e,o){return a(),t("svg",ae,[...o[0]||(o[0]=[s("g",{stroke:"null"},[s("path",{d:"m13.585 23.73-.016-7.539L7.08 12.41.603 16.177l.016 7.598 6.461 3.751 6.505-3.797zm-5.847 1.893.012-5.278 4.51-2.635.012 5.267-4.534 2.646zM7.08 13.928l4.532 2.642-4.516 2.638-4.533-2.652 4.517-2.628zM1.92 17.7l4.519 2.644-.012 5.285-4.496-2.61-.011-5.32zM20.583 12.41l-6.477 3.767.016 7.598 6.462 3.751 6.504-3.797-.016-7.538-6.489-3.781zm0 1.518 4.532 2.642-4.517 2.638-4.533-2.652 4.517-2.628zM15.421 17.7l4.518 2.644-.011 5.285-4.495-2.61-.012-5.32zm5.82 7.923.011-5.278 4.51-2.635.012 5.266-4.533 2.647zM20.336 4.268 13.846.487 7.37 4.254l.016 7.597 6.461 3.752 6.505-3.797-.015-7.538zm-6.49-2.263 4.532 2.641-4.517 2.64L9.33 4.631zM8.684 5.777l4.519 2.644-.012 5.286-4.496-2.611-.011-5.32zm5.82 7.923.01-5.278 4.511-2.635.012 5.267-4.534 2.646z"})],-1)])])}const oe={render:se},le=Object.freeze(Object.defineProperty({__proto__:null,default:oe,render:se},Symbol.toStringTag,{value:"Module"})),ne={class:"relative w-0 flex justify-end"},re={class:"loading-container"},ue=V(o({__name:"LoadingIcon",setup(e){const{t:o}=l(),c=n(o("b.loading"));return(e,o)=>(a(),t("div",ne,[s("div",re,[o[0]||(o[0]=s("span",{class:"loading loading-spinner loading-xs mb-0.5"},null,-1)),(a(!0),t(r,null,u(c.value,(e,s)=>(a(),t("span",{key:s,class:"loading-char",style:i({animationDelay:.1*s+"s"})},p(e),5))),128))])]))}}),[["__scopeId","data-v-23af43ee"]]),ie=["onClick"],pe=o({__name:"LangPopupButton",setup(e){const{locale:s}=l(),o=P();return(e,l)=>(a(),c(F,{icon:m(G),"icon-size":24,noPd:"",position:"bottom"},{default:d(({close:e})=>[v(E,{class:"p-2 w-28 items-center"},{default:d(()=>[(a(!0),t(r,null,u(m(o).langs,l=>(a(),t("div",{class:_(["text-center cursor-pointer hover:text-active",{"text-active":m(o).lang.value===l.value}]),key:l.value,onClick:t=>((e=>{o.lang=e,s.value=e.value})(l),e())},p(l.label),11,ie))),128))]),_:2},1024)]),_:1},8,["icon"]))}}),ce={class:"sticky top-0 z-10 w-full mx-auto px-4 flex h-16 justify-between items-center bg-background"},me={class:"text-md text-background-content font-bold"},de={class:"flex gap-4 items-center"},ve={key:0,class:"flex justify-center w-full bg-warning/30"},_e=o({__name:"HomeHeader",setup(o){const u=T(),j=I(),k=B(),w=P(),b=O(),S=e(),z=n(null),U=n(!1),q=g(),V=n(""),E=f(),{t:F}=l(),G=R(F),Y=()=>{S.isLogin?q.push({name:"message"}):E.info(F("t.qing-xian-deng-lu"))},Q=e=>{b.nav.name=e,V.value=e},W=e=>{b.postPage.page=e},Z=()=>{U.value=!1,z.value&&q.push({name:"postDetails",params:{postId:z.value.id}})};return x(()=>{w.loading=!0,M({top:2}).then(e=>{z.value=(e=>{const t=new Set(j.popUps);return e.find(e=>!t.has(e.id))??null})(e.data.data.list),z.value&&(U.value=!0),w.loading=!1}),C().then(e=>{u.replyUnread=e.data.data.filter(e=>1===e.type),u.likesUnread=e.data.data.filter(e=>2===e.type)})}),(e,o)=>(a(),t(r,null,[s("header",ce,[s("button",{class:"flex justify-center items-center gap-2 cursor-pointer",onClick:o[0]||(o[0]=t=>e.$router.push("/"))},[v(m(le),{class:"text-background-content",style:i({fill:m(k).darkTheme?"rgba(255, 255, 255, 0.9)":"#666666"})},null,8,["style"]),s("div",me,p(e.$t("other.title-logo")),1)]),v($,{menuItems:m(G),activeNavName:V.value,updateNav:Q,updatePage:W},null,8,["menuItems","activeNavName"]),s("div",de,[m(w).loading?(a(),c(ue,{key:0})):y("",!0),v(A,{class:_(["relative cursor-pointer",{"pr-2":m(u).replyUnread.length>0}]),icon:m(J),iconSize:25,noPd:"",onClick:Y},{default:d(()=>[m(S).isLogin&&m(u).replyUnread.length?(a(),c(H,{key:0,size:"xs",status:"error",class:"absolute top-[-4px] right-[-10%]"},{default:d(()=>[h(p(m(L)(m(u).replyUnread.length+m(u).likesUnread.length)),1)]),_:1})):y("",!0)]),_:1},8,["class","icon"]),v(A,{icon:m(K),iconSize:24,noPd:"",onClick:o[1]||(o[1]=t=>e.$router.push({name:"mingrentang"}))},null,8,["icon"]),v(N),v(pe),v(D)])]),U.value?(a(),t("div",ve,[s("span",{onClick:Z},p(z.value?.title),1),v(A,{class:"ml-4",icon:m(X),onClick:o[2]||(o[2]=e=>{return t=z.value?.id,t&&(j.popUps.push(t),j.popUps=Array.from(new Set(j.popUps))),void(U.value=!1);var t}),noPd:"",noBg:""},null,8,["icon"])])):y("",!0)],64))}}),ge={class:"flex-1 overflow-auto"},fe={class:"font-bold"},xe=["innerHTML"],ye={class:"flex gap-4"},he=o({__name:"PopUpAnnouncement",setup(e){const t=I(),o=Q(),l=g(),r=n(!1),u=n(null),i=()=>{r.value=!1,l.push({name:"postDetails",params:{postId:u.value?.id}})};return x(()=>{M({top:3}).then(e=>{u.value=(e=>{const a=new Set(t.popUps);return e.find(e=>!a.has(e.id))??null})(e.data.data.list),u.value&&(r.value=!0)})}),(e,l)=>(a(),c(Y,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e)},{default:d(()=>[v(E,{class:_(["max-h-[65dvh] flex flex-col",{"max-w-2xl ":2==m(o).device,"w-[80vw]":1==m(o).device}])},{default:d(()=>[l[2]||(l[2]=s("div",{class:"text-lg font-bold text-center"},"站内公告",-1)),s("div",ge,[s("div",fe,p(u.value?.title),1),s("div",{innerHTML:u.value?.content,class:"tiptap w-full h-full p-4"},null,8,xe)]),s("div",ye,[v(A,{class:"flex-1",onClick:i,Border:""},{default:d(()=>[h(p(e.$t("b.cha-kan-xiang-qing")),1)]),_:1}),v(A,{class:"flex-1 text-success",onClick:l[0]||(l[0]=e=>{return a=u.value?.id,a&&(t.popUps.push(a),t.popUps=Array.from(new Set(t.popUps))),void(r.value=!1);var a}),Border:""},{default:d(()=>[h(p(e.$t("b.yi-yue")),1)]),_:1})])]),_:1},8,["class"])]),_:1},8,["modelValue"]))}}),je={class:"mx-auto max-w-[1600px] pb-4 pm-4"},ke={class:"w-full mx-auto px-4 pt-1 overflow-y-auto"},we={key:0,class:"text-center"},be=o({__name:"PcIndex",setup:e=>(e,o)=>{const l=j("router-view");return a(),t("div",je,[v(_e),s("div",ke,[v(l)]),m(W)([1,2,3,4,5,6,7,8,9,10])?(a(),t("div",we," updateTime: 2025年12月1日22:14:54 ")):y("",!0),v(he)])}}),Se={class:"home-content"},ze={key:0,class:"text-center"},Ue=o({__name:"MobileIndex",setup(e){k.registerPlugin(w);const o=n(null),l=n(0);U("refreshScroll",l),U("containerRef",o);const u=b(),i=n("");return x(()=>{if(!o.value)return;const e=o.value.querySelector(".home-content");w.create({scroller:o.value,trigger:e,start:"top top",end:"bottom bottom",onUpdate:e=>{l.value=e.progress}})}),S(()=>{w.getAll().forEach(e=>e.kill())}),z(()=>u.path,e=>{i.value=e},{immediate:!0}),(e,l)=>{const n=j("RouterView");return a(),t(r,null,[s("div",{ref_key:"containerRef",ref:o,class:"overflow-y-auto overflow-x-hidden w-full h-[100dvh]"},[s("div",Se,[v(n)]),m(W)([1,2,3,4,5,6,7,8,9,10])?(a(),t("div",ze," updateTime: 2025年12月1日22:14:54 ")):y("",!0)],512),v(he)],64)}}}),Me=o({__name:"Index",setup(t){const{t:s,locale:o}=l(),n=e(),r=Q(),u=P();o.value=u.lang.value,x(async()=>{n.autoLogin?await Z():ee(),te(s)});const i=B();z(()=>i.darkTheme,e=>{q(e)},{immediate:!0});const p=e=>{u.menu.x=e.clientX,u.menu.y=e.clientY};return(e,t)=>2==m(r).device?(a(),c(be,{key:0,onContextmenu:p})):(a(),c(Ue,{key:1}))}});export{Me as default};
