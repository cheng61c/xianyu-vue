import{k as e,f as s,S as t,aE as a}from"./store-module/admin/service-Dq4pkIEc.js";import{u as r}from"./store-module/user/userStore-8LCsejjm.js";import{_ as i}from"./Avatar.vue_vue_type_script_setup_true_lang-Cq1EuCfW.js";import{_ as n}from"./ScRole.vue_vue_type_script_setup_true_lang-Bz5l_0n_.js";import{_ as o}from"./ScTag.vue_vue_type_script_setup_true_lang-DsxShMn2.js";import{_ as u}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{v as l,w as c,u as f,x as p,B as d,o as m,D as g,g as _,q as v,C as h,A as x,J as I}from"./lucide-vue-next-Cfi51zEF.js";const y={class:"text-lg font-bold"},j={class:"flex items-center flex-wrap gap-2"},b={class:"text-sm text-background-content"},k=l({__name:"MobileUserHeader",props:{isEdit:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({})}},emits:["updateUserInfo"],setup(l,{expose:k,emit:w}){const{t:C}=c(),S=f(),z=r(),A=p(null),B=w,E=l,U=()=>{var e;E.isEdit&&(null==(e=A.value)||e.click())},R=async e=>{var s;const r=null==(s=e.target.files)?void 0:s[0];if(r)try{const e=await t(r,6);if(200===e.data.code){const s=e.data.data.url;200===(await a({headImg:s})).data.code?(z.userInfo.headImg=s,S.success(C("t.tou-xiang-geng-xin-cheng-gong")),B("updateUserInfo")):S.error(C("t.tou-xiang-geng-xin-shi-bai"))}else S.error(C("t.tou-xiang-shang-chuan-shi-bai"))}catch(i){S.error(C("t.tou-xiang-shang-chuan-shi-bai")+((null==i?void 0:i.msg)||""))}};return k({triggerFileInput:U}),(t,a)=>(m(),d(u,{class:"w-full items-center",noCol:""},{default:g(()=>[_(i,{src:h(e)(l.userInfo.headImg)||"",alt:l.userInfo.nickname,size:64,onClick:U},null,8,["src","alt"]),v("input",{ref_key:"fileInputRef",ref:A,type:"file",accept:"image/*",style:{display:"none"},onChange:R},null,544),v("div",null,[v("div",y,x(l.userInfo.nickname),1),v("div",j,[_(o,{size:"sm",status:"info"},{default:g(()=>[I(" uid "+x(l.userInfo.id),1)]),_:1}),_(n,{user:l.userInfo,isAll:"",size:"sm"},null,8,["user"])]),v("div",b,x(t.$t("d.shang-ci-deng-lu-shi-jian-formattimeuserstoreuserinfolastlogintime",[h(s)(l.userInfo.lastLoginTime,t.$t)])),1)])]),_:1}))}});export{k as _};
