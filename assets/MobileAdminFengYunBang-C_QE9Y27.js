import{v as e,u as l,w as a,x as t,M as u,H as n,f as o,o as i,g as s,B as d,I as r,D as v,q as c,C as m,J as p,A as g,F as f,y as h,W as _,R as b}from"./lucide-vue-next-Cfi51zEF.js";import{_ as x}from"./Card.vue_vue_type_script_setup_true_lang-CKUt07f3.js";import{_ as j}from"./ScModal.vue_vue_type_script_setup_true_lang-Go71FWDS.js";import{_ as y}from"./TipTap.vue_vue_type_script_setup_true_lang-z5it9mjF.js";import{_ as k}from"./ScButton.vue_vue_type_script_setup_true_lang-Ef9ZHzzG.js";import{_ as $}from"./ScInput.vue_vue_type_script_setup_true_lang-mHghoQCQ.js";import{u as q}from"./store-module/fengyunbang/FengYunBangStore-zvNg3Rr9.js";import{a as w,b as I,d as V}from"./store-module/fengyunbang/service-BcGPwOsI.js";import{S as C}from"./store-module/admin/service-Dq4pkIEc.js";import{_ as B}from"./Avatar.vue_vue_type_script_setup_true_lang-Cq1EuCfW.js";import{_ as S}from"./ScDrawer.vue_vue_type_script_setup_true_lang-BAH82y4L.js";import{u as U}from"./store-global/deviceStore-KmV5dTi1.js";import{$ as z,l as D}from"./vendor-lucide-BLqUBl1f.js";import"./store-module/post/postStore-D6edmGvH.js";import"./store-global/configStore-BTeIPwoA.js";import"./store-module/user/userStore-8LCsejjm.js";import"./store-global/drawerStore-BV3ZUw2h.js";const A={class:"flex gap-2"},F={class:"overflow-x-auto"},L={class:"table"},M={class:"flex items-center gap-2"},T={class:"text-xl"},E={class:"flex items-center gap-4"},O={class:"flex flex-col"},Y={class:"flex flex-col gap-1"},H={class:"flex items-center gap-4"},J={class:"flex justify-end mt-1 gap-4"},K={class:"text-xl"},P={class:"flex items-center gap-4"},R={class:"font-bold"},W={class:"flex justify-end mt-1 gap-4"},G={class:"bg-background rounded-t-lg"},N=e({__name:"MobileAdminFengYunBang",setup(e){const N=l(),{t:Q}=a(),X=q(),Z=U(),ee=t(!1),le=t(!1),ae=t(!1),te=t(null),ue=t(!1),ne=t(!1),oe=t({id:0,title:"",headImg:"",content:""}),ie=t(""),se=t(null),de=()=>{ae.value=!0},re=()=>{if(!ee.value)return oe.value={id:0,title:"",headImg:"",content:""},se.value="",ie.value="",void(ee.value=!0);""!==ie.value&&(oe.value.headImg=`http://q1.qlogo.cn/g?b=qq&s=4&nk=${ie.value.trim()}`),se.value&&(oe.value.content=se.value),I(oe.value,Q,()=>{ee.value=!1,oe.value={title:"",headImg:"",content:""},se.value="",ie.value="",ne.value=!1})},ve=e=>{if(e)return oe.value={id:e.id,title:e.title,headImg:e.headImg,content:e.content||""},void(le.value=!0);oe.value.id&&V(oe.value.id,Q,()=>{oe.value={id:0,title:"",headImg:"",content:""},ie.value="",le.value=!1})},ce=e=>{ee.value&&e.ctrlKey&&"s"===e.key.toLowerCase()&&(e.preventDefault(),I(oe.value,Q,()=>{ee.value=!1,oe.value={title:"",headImg:"",content:""},ie.value=""}))},me=e=>{var l;e.preventDefault();const a=null==(l=e.dataTransfer)?void 0:l.files;a&&a.length>0&&pe({target:{files:a}})},pe=async e=>{const l=e.target.files;if(l){ue.value=!0;try{const e=l[0],a=await C(e,6);oe.value.headImg=a.data.data.url,ue.value=!1}catch(a){N.error(Q("t.tu-pian-shang-chuan-shi-bai-filename",[l[0].name])),ue.value=!1}te.value&&(te.value.value="")}},ge=()=>{var e;null==(e=te.value)||e.click()};return u(()=>{window.removeEventListener("keydown",ce)}),n(()=>{w(Q),window.addEventListener("keydown",ce)}),(e,l)=>(i(),o(f,null,[s(x,{class:"mb-4"},{default:v(()=>[c("div",A,[s(k,{onClick:m(w),icon:m(z),Border:""},{default:v(()=>[p(g(e.$t("b.shua-xin-lie-biao")),1)]),_:1},8,["onClick","icon"]),s(k,{onClick:re,icon:m(D),Border:""},{default:v(()=>[p(g(e.$t("b.tian-jia-wan-jia")),1)]),_:1},8,["icon"])])]),_:1}),m(X).list.length?(i(),d(x,{key:0,class:"mb-4"},{default:v(()=>[c("div",F,[c("table",L,[c("thead",null,[c("tr",null,[l[12]||(l[12]=c("th",null,"ID",-1)),c("th",null,g(e.$t("b.ming-cheng")),1),c("th",null,g(e.$t("b.chuang-jian-shi-jian")),1),c("th",null,g(e.$t("b.geng-xin-shi-jian")),1),c("th",null,g(e.$t("b.cao-zuo")),1)])]),c("tbody",null,[(i(!0),o(f,null,h(m(X).list,l=>(i(),o("tr",{key:l.id},[c("th",null,g(l.id),1),c("td",null,g(l.title),1),c("td",null,g(l.createdAt),1),c("td",null,g(l.updatedAt),1),c("td",null,[c("div",M,[s(k,{Border:"",onClick:e=>(e=>{oe.value={id:e.id,title:e.title,headImg:e.headImg,content:e.content||""},se.value=e.content,e.userId&&(oe.value.userId=e.userId),""!==ie.value&&(oe.value.headImg=`http://q1.qlogo.cn/g?b=qq&s=4&nk=${ie.value.trim()}`),ee.value=!0,ne.value=!0})(l)},{default:v(()=>[p(g(e.$t("b.bian-ji")),1)]),_:1},8,["onClick"]),s(k,{Border:"",onClick:e=>ve(l)},{default:v(()=>[p(g(e.$t("b.shan-chu")),1)]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})):r("",!0),s(j,{modelValue:ee.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ee.value=e),offOverflow:""},{default:v(()=>[s(x,{class:"max-h-[80vh] overflow-y-auto w-[95vw] gap-4"},{default:v(()=>{return[c("span",T,g(e.$t("b.tian-jia-wan-jia")),1),c("div",E,[c("span",null,g(e.$t("d.ming-cheng")),1),s($,{modelValue:oe.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>oe.value.title=e),placeholder:e.$t("t.wan-jia-ming-cheng")},null,8,["modelValue","placeholder"])]),c("div",O,[c("p",null,g(e.$t("f.she-qu-id")),1),s($,{modelValue:oe.value.userId,"onUpdate:modelValue":l[1]||(l[1]=e=>oe.value.userId=e),placeholder:e.$t("t.zai-she-qu-zhong-you-zhang-hao-shi-tian-xie")},null,8,["modelValue","placeholder"])]),c("div",Y,[c("p",null,g(e.$t("f.tou-xiang-lian-jie")),1),s($,{modelValue:oe.value.headImg,"onUpdate:modelValue":l[2]||(l[2]=e=>oe.value.headImg=e),placeholder:e.$t("t.tou-xiang-lian-jie")},null,8,["modelValue","placeholder"]),s(k,{Border:"",onDragover:l[3]||(l[3]=_(()=>{},["prevent"])),onDrop:_(me,["prevent"]),onClick:ge},b({default:v(()=>[c("input",{type:"file",accept:"image/*",ref_key:"fileInput",ref:te,class:"hidden",onChange:pe},null,544),c("div",null,g(e.$t("f.jiang-tu-pian-tuo-dao-ci-chu-huo-dian-ji-shang-chuan")),1)]),_:2},[oe.value.headImg?{name:"endIcon",fn:v(()=>[s(B,{src:oe.value.headImg,alt:oe.value.title},null,8,["src","alt"])]),key:"0"}:void 0]),1024),ue.value?(i(),d(k,{key:0,noPd:""},{default:v(()=>[...l[13]||(l[13]=[c("span",{class:"loading loading-spinner"},null,-1)])]),_:1})):r("",!0),c("p",null,g(e.$t("f.huo-zhe-shi-yong-qq-tou-xiang")),1),l[14]||(l[14]=c("p",null,"http://q1.qlogo.cn/g?b=qq&s=4&nk=",-1)),c("div",H,[s($,{modelValue:ie.value,"onUpdate:modelValue":l[4]||(l[4]=e=>ie.value=e),placeholder:e.$t("f.tian-ru-qq-hao-zuo-wei-tou-xiang")},null,8,["modelValue","placeholder"]),""!=ie.value?(i(),d(B,{key:0,src:(a=ie.value,`http://q1.qlogo.cn/g?b=qq&s=4&nk=${a.trim()}`),alt:oe.value.title},null,8,["src","alt"])):r("",!0)])]),1==m(Z).device?(i(),d(k,{key:0,onClick:de,Border:"",class:"w-full"},{default:v(()=>[p(g(e.$t("b.bian-xie-wen-zhang")),1)]),_:1})):r("",!0),c("div",J,[s(k,{onClick:re,Border:""},{default:v(()=>[p(g(0!=oe.value.id?e.$t("b.que-ren-xiu-gai"):e.$t("b.que-ren-tian-jia")),1)]),_:1}),s(k,{onClick:l[5]||(l[5]=e=>ee.value=!1),Border:""},{default:v(()=>[p(g(e.$t("b.qu-xiao")),1)]),_:1})])];var a}),_:1})]),_:1},8,["modelValue"]),s(j,{modelValue:le.value,"onUpdate:modelValue":l[9]||(l[9]=e=>le.value=e),offOverflow:""},{default:v(()=>[s(x,{class:"max-h-[80vh] overflow-y-auto w-2xl"},{default:v(()=>[c("span",K,g(e.$t("b.shan-chu")),1),c("div",P,[c("span",null,g(e.$t("d.ming-cheng")),1),c("span",R,g(oe.value.title),1)]),c("div",W,[s(k,{onClick:l[7]||(l[7]=e=>ve()),Border:"",class:"text-error border-error"},{default:v(()=>[p(g(e.$t("b.que-ren-shan-chu")),1)]),_:1}),s(k,{onClick:l[8]||(l[8]=e=>le.value=!1),Border:""},{default:v(()=>[p(g(e.$t("b.qu-xiao")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),s(S,{modelValue:ae.value,"onUpdate:modelValue":l[11]||(l[11]=e=>ae.value=e),position:"bottom"},{default:v(()=>[c("div",G,[null!==se.value?(i(),d(y,{key:0,modelValue:se.value,"onUpdate:modelValue":l[10]||(l[10]=e=>se.value=e),"is-mobile":1==m(Z).device},null,8,["modelValue","is-mobile"])):r("",!0)])]),_:1},8,["modelValue"])],64))}});export{N as default};
